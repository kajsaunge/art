{
  "{\"sourceRoot\":\"/Users/kung/Projects/trainings/the-arts\",\"babelrc\":false,\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/kung/Projects/trainings/the-arts\",\"filename\":\"/Users/kung/Projects/trainings/the-arts/url-to-withrouter.js\",\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/kung/Projects/trainings/the-arts\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"PrivateName\":{\"enter\":[null]},\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassDeclaration\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]}},\"options\":{}},{\"key\":\"transform-flow-strip-types\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]},\"ImportDeclaration\":{\"enter\":[null,null]},\"ClassProperty\":{\"enter\":[null]},\"ClassPrivateProperty\":{\"enter\":[null]},\"AssignmentPattern\":{\"enter\":[null]},\"TypeCastExpression\":{\"enter\":[null,null]},\"CallExpression\":{\"enter\":[null]},\"OptionalCallExpression\":{\"enter\":[null]},\"NewExpression\":{\"enter\":[null]},\"ImportSpecifier\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"AnyTypeAnnotation\":{\"enter\":[null]},\"ArrayTypeAnnotation\":{\"enter\":[null]},\"BooleanTypeAnnotation\":{\"enter\":[null]},\"BooleanLiteralTypeAnnotation\":{\"enter\":[null]},\"NullLiteralTypeAnnotation\":{\"enter\":[null]},\"ClassImplements\":{\"enter\":[null]},\"DeclareClass\":{\"enter\":[null]},\"DeclareFunction\":{\"enter\":[null]},\"DeclareInterface\":{\"enter\":[null]},\"DeclareModule\":{\"enter\":[null]},\"DeclareModuleExports\":{\"enter\":[null]},\"DeclareTypeAlias\":{\"enter\":[null]},\"DeclareOpaqueType\":{\"enter\":[null]},\"DeclareVariable\":{\"enter\":[null]},\"DeclareExportDeclaration\":{\"enter\":[null]},\"DeclareExportAllDeclaration\":{\"enter\":[null]},\"DeclaredPredicate\":{\"enter\":[null]},\"ExistsTypeAnnotation\":{\"enter\":[null]},\"FunctionTypeAnnotation\":{\"enter\":[null]},\"FunctionTypeParam\":{\"enter\":[null]},\"GenericTypeAnnotation\":{\"enter\":[null]},\"InferredPredicate\":{\"enter\":[null]},\"InterfaceExtends\":{\"enter\":[null]},\"InterfaceDeclaration\":{\"enter\":[null]},\"InterfaceTypeAnnotation\":{\"enter\":[null]},\"IntersectionTypeAnnotation\":{\"enter\":[null]},\"MixedTypeAnnotation\":{\"enter\":[null]},\"EmptyTypeAnnotation\":{\"enter\":[null]},\"NullableTypeAnnotation\":{\"enter\":[null]},\"NumberLiteralTypeAnnotation\":{\"enter\":[null]},\"NumberTypeAnnotation\":{\"enter\":[null]},\"ObjectTypeAnnotation\":{\"enter\":[null]},\"ObjectTypeInternalSlot\":{\"enter\":[null]},\"ObjectTypeCallProperty\":{\"enter\":[null]},\"ObjectTypeIndexer\":{\"enter\":[null]},\"ObjectTypeProperty\":{\"enter\":[null]},\"ObjectTypeSpreadProperty\":{\"enter\":[null]},\"OpaqueType\":{\"enter\":[null]},\"QualifiedTypeIdentifier\":{\"enter\":[null]},\"StringLiteralTypeAnnotation\":{\"enter\":[null]},\"StringTypeAnnotation\":{\"enter\":[null]},\"ThisTypeAnnotation\":{\"enter\":[null]},\"TupleTypeAnnotation\":{\"enter\":[null]},\"TypeofTypeAnnotation\":{\"enter\":[null]},\"TypeAlias\":{\"enter\":[null]},\"TypeAnnotation\":{\"enter\":[null]},\"TypeParameter\":{\"enter\":[null]},\"TypeParameterDeclaration\":{\"enter\":[null]},\"TypeParameterInstantiation\":{\"enter\":[null]},\"UnionTypeAnnotation\":{\"enter\":[null]},\"Variance\":{\"enter\":[null]},\"VoidTypeAnnotation\":{\"enter\":[null]},\"ExportAllDeclaration\":{\"enter\":[null]},\"ExportDefaultDeclaration\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.4.3": {
    "metadata": {},
    "options": {
      "sourceRoot": "/Users/kung/Projects/trainings/the-arts",
      "babelrc": false,
      "caller": {
        "name": "@babel/register"
      },
      "cwd": "/Users/kung/Projects/trainings/the-arts",
      "filename": "/Users/kung/Projects/trainings/the-arts/url-to-withrouter.js",
      "configFile": false,
      "envName": "development",
      "root": "/Users/kung/Projects/trainings/the-arts",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "proposal-class-properties",
          "visitor": {
            "PrivateName": {
              "enter": [
                null
              ]
            },
            "ExportDefaultDeclaration": {
              "enter": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true,
            "ClassDeclaration": {
              "enter": [
                null
              ]
            },
            "ClassExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {}
        },
        {
          "key": "transform-flow-strip-types",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            },
            "ImportDeclaration": {
              "enter": [
                null,
                null
              ]
            },
            "ClassProperty": {
              "enter": [
                null
              ]
            },
            "ClassPrivateProperty": {
              "enter": [
                null
              ]
            },
            "AssignmentPattern": {
              "enter": [
                null
              ]
            },
            "TypeCastExpression": {
              "enter": [
                null,
                null
              ]
            },
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "OptionalCallExpression": {
              "enter": [
                null
              ]
            },
            "NewExpression": {
              "enter": [
                null
              ]
            },
            "ImportSpecifier": {
              "enter": [
                null
              ]
            },
            "ClassDeclaration": {
              "enter": [
                null
              ]
            },
            "ClassExpression": {
              "enter": [
                null
              ]
            },
            "FunctionDeclaration": {
              "enter": [
                null
              ]
            },
            "FunctionExpression": {
              "enter": [
                null
              ]
            },
            "ObjectMethod": {
              "enter": [
                null
              ]
            },
            "ArrowFunctionExpression": {
              "enter": [
                null
              ]
            },
            "ClassMethod": {
              "enter": [
                null
              ]
            },
            "ClassPrivateMethod": {
              "enter": [
                null
              ]
            },
            "AnyTypeAnnotation": {
              "enter": [
                null
              ]
            },
            "ArrayTypeAnnotation": {
              "enter": [
                null
              ]
            },
            "BooleanTypeAnnotation": {
              "enter": [
                null
              ]
            },
            "BooleanLiteralTypeAnnotation": {
              "enter": [
                null
              ]
            },
            "NullLiteralTypeAnnotation": {
              "enter": [
                null
              ]
            },
            "ClassImplements": {
              "enter": [
                null
              ]
            },
            "DeclareClass": {
              "enter": [
                null
              ]
            },
            "DeclareFunction": {
              "enter": [
                null
              ]
            },
            "DeclareInterface": {
              "enter": [
                null
              ]
            },
            "DeclareModule": {
              "enter": [
                null
              ]
            },
            "DeclareModuleExports": {
              "enter": [
                null
              ]
            },
            "DeclareTypeAlias": {
              "enter": [
                null
              ]
            },
            "DeclareOpaqueType": {
              "enter": [
                null
              ]
            },
            "DeclareVariable": {
              "enter": [
                null
              ]
            },
            "DeclareExportDeclaration": {
              "enter": [
                null
              ]
            },
            "DeclareExportAllDeclaration": {
              "enter": [
                null
              ]
            },
            "DeclaredPredicate": {
              "enter": [
                null
              ]
            },
            "ExistsTypeAnnotation": {
              "enter": [
                null
              ]
            },
            "FunctionTypeAnnotation": {
              "enter": [
                null
              ]
            },
            "FunctionTypeParam": {
              "enter": [
                null
              ]
            },
            "GenericTypeAnnotation": {
              "enter": [
                null
              ]
            },
            "InferredPredicate": {
              "enter": [
                null
              ]
            },
            "InterfaceExtends": {
              "enter": [
                null
              ]
            },
            "InterfaceDeclaration": {
              "enter": [
                null
              ]
            },
            "InterfaceTypeAnnotation": {
              "enter": [
                null
              ]
            },
            "IntersectionTypeAnnotation": {
              "enter": [
                null
              ]
            },
            "MixedTypeAnnotation": {
              "enter": [
                null
              ]
            },
            "EmptyTypeAnnotation": {
              "enter": [
                null
              ]
            },
            "NullableTypeAnnotation": {
              "enter": [
                null
              ]
            },
            "NumberLiteralTypeAnnotation": {
              "enter": [
                null
              ]
            },
            "NumberTypeAnnotation": {
              "enter": [
                null
              ]
            },
            "ObjectTypeAnnotation": {
              "enter": [
                null
              ]
            },
            "ObjectTypeInternalSlot": {
              "enter": [
                null
              ]
            },
            "ObjectTypeCallProperty": {
              "enter": [
                null
              ]
            },
            "ObjectTypeIndexer": {
              "enter": [
                null
              ]
            },
            "ObjectTypeProperty": {
              "enter": [
                null
              ]
            },
            "ObjectTypeSpreadProperty": {
              "enter": [
                null
              ]
            },
            "OpaqueType": {
              "enter": [
                null
              ]
            },
            "QualifiedTypeIdentifier": {
              "enter": [
                null
              ]
            },
            "StringLiteralTypeAnnotation": {
              "enter": [
                null
              ]
            },
            "StringTypeAnnotation": {
              "enter": [
                null
              ]
            },
            "ThisTypeAnnotation": {
              "enter": [
                null
              ]
            },
            "TupleTypeAnnotation": {
              "enter": [
                null
              ]
            },
            "TypeofTypeAnnotation": {
              "enter": [
                null
              ]
            },
            "TypeAlias": {
              "enter": [
                null
              ]
            },
            "TypeAnnotation": {
              "enter": [
                null
              ]
            },
            "TypeParameter": {
              "enter": [
                null
              ]
            },
            "TypeParameterDeclaration": {
              "enter": [
                null
              ]
            },
            "TypeParameterInstantiation": {
              "enter": [
                null
              ]
            },
            "UnionTypeAnnotation": {
              "enter": [
                null
              ]
            },
            "Variance": {
              "enter": [
                null
              ]
            },
            "VoidTypeAnnotation": {
              "enter": [
                null
              ]
            },
            "ExportAllDeclaration": {
              "enter": [
                null
              ]
            },
            "ExportDefaultDeclaration": {
              "enter": [
                null
              ]
            },
            "ExportNamedDeclaration": {
              "enter": [
                null
              ]
            }
          },
          "options": {}
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "loose": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/kung/Projects/trainings/the-arts/url-to-withrouter.js",
        "plugins": [
          "classProperties",
          "classPrivateProperties",
          [
            "flow",
            {}
          ],
          "asyncGenerators",
          "objectRestSpread",
          "jsonStrings",
          "optionalCatchBinding"
        ]
      },
      "generatorOpts": {
        "filename": "/Users/kung/Projects/trainings/the-arts/url-to-withrouter.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/kung/Projects/trainings/the-arts",
        "sourceFileName": "url-to-withrouter.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = transformer;\n\nfunction addWithRouterImport(j, root) {\n  // We create an import specifier, this is the value of an import, eg:\n  // import {withRouter} from 'next/router\n  // The specifier would be `withRouter`\n  const withRouterSpecifier = j.importSpecifier(j.identifier('withRouter')); // Check if this file is already import `next/router`\n  // so that we can just attach `withRouter` instead of creating a new `import` node\n\n  const originalRouterImport = root.find(j.ImportDeclaration, {\n    source: {\n      value: 'next/router'\n    }\n  });\n\n  if (originalRouterImport.length > 0) {\n    // Check if `withRouter` is already imported. In that case we don't have to do anything\n    if (originalRouterImport.find(j.ImportSpecifier, {\n      imported: {\n        name: 'withRouter'\n      }\n    }).length > 0) {\n      return;\n    } // Attach `withRouter` to the existing `next/router` import node\n\n\n    originalRouterImport.forEach(node => {\n      node.value.specifiers.push(withRouterSpecifier);\n    });\n    return;\n  } // Create import node\n  // import {withRouter} from 'next/router'\n\n\n  const withRouterImport = j.importDeclaration([withRouterSpecifier], j.stringLiteral('next/router')); // Find the Program, this is the top level AST node\n\n  const Program = root.find(j.Program); // Attach the import at the top of the body\n\n  Program.forEach(node => {\n    node.value.body.unshift(withRouterImport);\n  });\n}\n\nfunction getThisPropsUrlNodes(j, tree) {\n  return tree.find(j.MemberExpression, {\n    object: {\n      type: 'MemberExpression',\n      object: {\n        type: 'ThisExpression'\n      },\n      property: {\n        name: 'props'\n      }\n    },\n    property: {\n      name: 'url'\n    }\n  });\n}\n\nfunction getPropsUrlNodes(j, tree, name) {\n  return tree.find(j.MemberExpression, {\n    object: {\n      name\n    },\n    property: {\n      name: 'url'\n    }\n  });\n} // Wraps the provided node in a function call\n// For example if `functionName` is `withRouter` it will wrap the provided node in `withRouter(NODE_CONTENT)`\n\n\nfunction wrapNodeInFunction(j, functionName, args) {\n  const mappedArgs = args.map(node => {\n    // If the node is a ClassDeclaration we have to turn it into a ClassExpression\n    // since ClassDeclarations can't be wrapped in a function\n    if (node.type === 'ClassDeclaration') {\n      node.type = 'ClassExpression';\n    }\n\n    return node;\n  });\n  return j.callExpression(j.identifier(functionName), mappedArgs);\n}\n\nfunction turnUrlIntoRouter(j, tree) {\n  tree.find(j.Identifier, {\n    name: 'url'\n  }).replaceWith(j.identifier('router'));\n}\n\nfunction transformer(file, api) {\n  // j is just a shorthand for the jscodeshift api\n  const j = api.jscodeshift; // this is the AST root on which we can call methods like `.find`\n\n  const root = j(file.source); // We search for `export default`\n\n  const defaultExports = root.find(j.ExportDefaultDeclaration); // We loop over the `export default` instances\n  // This is just how jscodeshift works, there can only be one export default instance\n\n  defaultExports.forEach(rule => {\n    // rule.value is an AST node\n    const {\n      value: node\n    } = rule; // declaration holds the AST node for what comes after `export default`\n\n    const {\n      declaration\n    } = node;\n\n    function wrapDefaultExportInWithRouter() {\n      if (j(rule).find(j.CallExpression, {\n        callee: {\n          name: 'withRouter'\n        }\n      }).length > 0) {\n        return;\n      }\n\n      j(rule).replaceWith(j.exportDefaultDeclaration(wrapNodeInFunction(j, 'withRouter', [declaration])));\n    } // The `Identifier` type is given in this case:\n    // export default Test\n    // where `Test` is the identifier\n\n\n    if (declaration.type === 'Identifier') {\n      // the variable name\n      const {\n        name\n      } = declaration; // find the implementation of the variable, can be a class, function, etc\n\n      let implementation = root.find(j.Declaration, {\n        id: {\n          name\n        }\n      });\n\n      if (implementation.length === 0) {\n        implementation = root.find(j.VariableDeclarator, {\n          id: {\n            name\n          }\n        });\n      }\n\n      implementation.find(j.Property, {\n        key: {\n          name: 'url'\n        }\n      }).forEach(propertyRule => {\n        const isThisPropsDestructure = j(propertyRule).closest(j.VariableDeclarator, {\n          init: {\n            object: {\n              type: 'ThisExpression'\n            },\n            property: {\n              name: 'props'\n            }\n          }\n        });\n\n        if (isThisPropsDestructure.length === 0) {\n          return;\n        }\n\n        const originalKeyValue = propertyRule.value.value.name;\n        propertyRule.value.key.name = 'router';\n        wrapDefaultExportInWithRouter();\n        addWithRouterImport(j, root); // If the property is reassigned to another variable we don't have to transform it\n\n        if (originalKeyValue !== 'url') {\n          return;\n        }\n\n        propertyRule.value.value.name = 'router';\n        j(propertyRule).closest(j.BlockStatement).find(j.Identifier, identifierNode => {\n          if (identifierNode.type === 'JSXIdentifier') {\n            return false;\n          }\n\n          if (identifierNode.name !== 'url') {\n            return false;\n          }\n\n          return true;\n        }).replaceWith(j.identifier('router'));\n      }); // Find usage of `this.props.url`\n\n      const thisPropsUrlUsage = getThisPropsUrlNodes(j, implementation);\n\n      if (thisPropsUrlUsage.length === 0) {\n        return;\n      } // rename `url` to `router`\n\n\n      turnUrlIntoRouter(j, thisPropsUrlUsage);\n      wrapDefaultExportInWithRouter();\n      addWithRouterImport(j, root);\n      return;\n    }\n\n    const arrowFunctions = j(rule).find(j.ArrowFunctionExpression);\n\n    (() => {\n      if (arrowFunctions.length === 0) {\n        return;\n      }\n\n      arrowFunctions.forEach(r => {\n        // This makes sure we don't match nested functions, only the top one\n        if (j(r).closest(j.Expression).length !== 0) {\n          return;\n        }\n\n        if (!r.value.params || !r.value.params[0]) {\n          return;\n        }\n\n        const name = r.value.params[0].name;\n        const propsUrlUsage = getPropsUrlNodes(j, j(r), name);\n\n        if (propsUrlUsage.length === 0) {\n          return;\n        }\n\n        turnUrlIntoRouter(j, propsUrlUsage);\n        wrapDefaultExportInWithRouter();\n        addWithRouterImport(j, root);\n      });\n      return;\n    })();\n\n    if (declaration.type === 'CallExpression') {\n      j(rule).find(j.CallExpression, haystack => {\n        const firstArgument = haystack.arguments[0] || {};\n\n        if (firstArgument.type === 'Identifier') {\n          return true;\n        }\n\n        return false;\n      }).forEach(callRule => {\n        const {\n          name\n        } = callRule.value.arguments[0]; // find the implementation of the variable, can be a class, function, etc\n\n        let implementation = root.find(j.Declaration, {\n          id: {\n            name\n          }\n        });\n\n        if (implementation.length === 0) {\n          implementation = root.find(j.VariableDeclarator, {\n            id: {\n              name\n            }\n          });\n        } // Find usage of `this.props.url`\n\n\n        const thisPropsUrlUsage = getThisPropsUrlNodes(j, implementation);\n        implementation.find(j.Property, {\n          key: {\n            name: 'url'\n          }\n        }).forEach(propertyRule => {\n          const isThisPropsDestructure = j(propertyRule).closest(j.VariableDeclarator, {\n            init: {\n              object: {\n                type: 'ThisExpression'\n              },\n              property: {\n                name: 'props'\n              }\n            }\n          });\n\n          if (isThisPropsDestructure.length === 0) {\n            return;\n          }\n\n          const originalKeyValue = propertyRule.value.value.name;\n          propertyRule.value.key.name = 'router';\n          wrapDefaultExportInWithRouter();\n          addWithRouterImport(j, root); // If the property is reassigned to another variable we don't have to transform it\n\n          if (originalKeyValue !== 'url') {\n            return;\n          }\n\n          propertyRule.value.value.name = 'router';\n          j(propertyRule).closest(j.BlockStatement).find(j.Identifier, identifierNode => {\n            if (identifierNode.type === 'JSXIdentifier') {\n              return false;\n            }\n\n            if (identifierNode.name !== 'url') {\n              return false;\n            }\n\n            return true;\n          }).replaceWith(j.identifier('router'));\n        });\n\n        if (thisPropsUrlUsage.length === 0) {\n          return;\n        } // rename `url` to `router`\n\n\n        turnUrlIntoRouter(j, thisPropsUrlUsage);\n        wrapDefaultExportInWithRouter();\n        addWithRouterImport(j, root);\n        return;\n      });\n    }\n\n    j(rule).find(j.Property, {\n      key: {\n        name: 'url'\n      }\n    }).forEach(propertyRule => {\n      const isThisPropsDestructure = j(propertyRule).closest(j.VariableDeclarator, {\n        init: {\n          object: {\n            type: 'ThisExpression'\n          },\n          property: {\n            name: 'props'\n          }\n        }\n      });\n\n      if (isThisPropsDestructure.length === 0) {\n        return;\n      }\n\n      const originalKeyValue = propertyRule.value.value.name;\n      propertyRule.value.key.name = 'router';\n      wrapDefaultExportInWithRouter();\n      addWithRouterImport(j, root); // If the property is reassigned to another variable we don't have to transform it\n\n      if (originalKeyValue !== 'url') {\n        return;\n      }\n\n      propertyRule.value.value.name = 'router';\n      j(propertyRule).closest(j.BlockStatement).find(j.Identifier, identifierNode => {\n        if (identifierNode.type === 'JSXIdentifier') {\n          return false;\n        }\n\n        if (identifierNode.name !== 'url') {\n          return false;\n        }\n\n        return true;\n      }).replaceWith(j.identifier('router'));\n    });\n    j(rule).find(j.MethodDefinition, {\n      key: {\n        name: 'componentWillReceiveProps'\n      }\n    }).forEach(methodRule => {\n      const func = methodRule.value.value;\n\n      if (!func.params[0]) {\n        return;\n      }\n\n      const firstArgumentName = func.params[0].name;\n      const propsUrlUsage = getPropsUrlNodes(j, j(methodRule), firstArgumentName);\n      turnUrlIntoRouter(j, propsUrlUsage);\n\n      if (propsUrlUsage.length === 0) {\n        return;\n      }\n\n      wrapDefaultExportInWithRouter();\n      addWithRouterImport(j, root);\n    });\n    j(rule).find(j.MethodDefinition, {\n      key: {\n        name: 'componentDidUpdate'\n      }\n    }).forEach(methodRule => {\n      const func = methodRule.value.value;\n\n      if (!func.params[0]) {\n        return;\n      }\n\n      const firstArgumentName = func.params[0].name;\n      const propsUrlUsage = getPropsUrlNodes(j, j(methodRule), firstArgumentName);\n      turnUrlIntoRouter(j, propsUrlUsage);\n\n      if (propsUrlUsage.length === 0) {\n        return;\n      }\n\n      wrapDefaultExportInWithRouter();\n      addWithRouterImport(j, root);\n    });\n    const thisPropsUrlUsage = getThisPropsUrlNodes(j, j(rule));\n    const propsUrlUsage = getPropsUrlNodes(j, j(rule), 'props'); // rename `url` to `router`\n\n    turnUrlIntoRouter(j, thisPropsUrlUsage);\n    turnUrlIntoRouter(j, propsUrlUsage);\n\n    if (thisPropsUrlUsage.length === 0 && propsUrlUsage.length === 0) {\n      return;\n    }\n\n    wrapDefaultExportInWithRouter();\n    addWithRouterImport(j, root);\n    return;\n  });\n  return root.toSource();\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInVybC10by13aXRocm91dGVyLmpzIl0sIm5hbWVzIjpbImFkZFdpdGhSb3V0ZXJJbXBvcnQiLCJqIiwicm9vdCIsIndpdGhSb3V0ZXJTcGVjaWZpZXIiLCJpbXBvcnRTcGVjaWZpZXIiLCJpZGVudGlmaWVyIiwib3JpZ2luYWxSb3V0ZXJJbXBvcnQiLCJmaW5kIiwiSW1wb3J0RGVjbGFyYXRpb24iLCJzb3VyY2UiLCJ2YWx1ZSIsImxlbmd0aCIsIkltcG9ydFNwZWNpZmllciIsImltcG9ydGVkIiwibmFtZSIsImZvckVhY2giLCJub2RlIiwic3BlY2lmaWVycyIsInB1c2giLCJ3aXRoUm91dGVySW1wb3J0IiwiaW1wb3J0RGVjbGFyYXRpb24iLCJzdHJpbmdMaXRlcmFsIiwiUHJvZ3JhbSIsImJvZHkiLCJ1bnNoaWZ0IiwiZ2V0VGhpc1Byb3BzVXJsTm9kZXMiLCJ0cmVlIiwiTWVtYmVyRXhwcmVzc2lvbiIsIm9iamVjdCIsInR5cGUiLCJwcm9wZXJ0eSIsImdldFByb3BzVXJsTm9kZXMiLCJ3cmFwTm9kZUluRnVuY3Rpb24iLCJmdW5jdGlvbk5hbWUiLCJhcmdzIiwibWFwcGVkQXJncyIsIm1hcCIsImNhbGxFeHByZXNzaW9uIiwidHVyblVybEludG9Sb3V0ZXIiLCJJZGVudGlmaWVyIiwicmVwbGFjZVdpdGgiLCJ0cmFuc2Zvcm1lciIsImZpbGUiLCJhcGkiLCJqc2NvZGVzaGlmdCIsImRlZmF1bHRFeHBvcnRzIiwiRXhwb3J0RGVmYXVsdERlY2xhcmF0aW9uIiwicnVsZSIsImRlY2xhcmF0aW9uIiwid3JhcERlZmF1bHRFeHBvcnRJbldpdGhSb3V0ZXIiLCJDYWxsRXhwcmVzc2lvbiIsImNhbGxlZSIsImV4cG9ydERlZmF1bHREZWNsYXJhdGlvbiIsImltcGxlbWVudGF0aW9uIiwiRGVjbGFyYXRpb24iLCJpZCIsIlZhcmlhYmxlRGVjbGFyYXRvciIsIlByb3BlcnR5Iiwia2V5IiwicHJvcGVydHlSdWxlIiwiaXNUaGlzUHJvcHNEZXN0cnVjdHVyZSIsImNsb3Nlc3QiLCJpbml0Iiwib3JpZ2luYWxLZXlWYWx1ZSIsIkJsb2NrU3RhdGVtZW50IiwiaWRlbnRpZmllck5vZGUiLCJ0aGlzUHJvcHNVcmxVc2FnZSIsImFycm93RnVuY3Rpb25zIiwiQXJyb3dGdW5jdGlvbkV4cHJlc3Npb24iLCJyIiwiRXhwcmVzc2lvbiIsInBhcmFtcyIsInByb3BzVXJsVXNhZ2UiLCJoYXlzdGFjayIsImZpcnN0QXJndW1lbnQiLCJhcmd1bWVudHMiLCJjYWxsUnVsZSIsIk1ldGhvZERlZmluaXRpb24iLCJtZXRob2RSdWxlIiwiZnVuYyIsImZpcnN0QXJndW1lbnROYW1lIiwidG9Tb3VyY2UiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQSxTQUFTQSxtQkFBVCxDQUE2QkMsQ0FBN0IsRUFBZ0NDLElBQWhDLEVBQXNDO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBLFFBQU1DLG1CQUFtQixHQUFHRixDQUFDLENBQUNHLGVBQUYsQ0FBa0JILENBQUMsQ0FBQ0ksVUFBRixDQUFhLFlBQWIsQ0FBbEIsQ0FBNUIsQ0FKcUMsQ0FNckM7QUFDQTs7QUFDQSxRQUFNQyxvQkFBb0IsR0FBR0osSUFBSSxDQUFDSyxJQUFMLENBQVVOLENBQUMsQ0FBQ08saUJBQVosRUFBK0I7QUFDM0RDLElBQUFBLE1BQU0sRUFBRTtBQUNQQyxNQUFBQSxLQUFLLEVBQUU7QUFEQTtBQURtRCxHQUEvQixDQUE3Qjs7QUFLQSxNQUFJSixvQkFBb0IsQ0FBQ0ssTUFBckIsR0FBOEIsQ0FBbEMsRUFBcUM7QUFDcEM7QUFDQSxRQUFJTCxvQkFBb0IsQ0FBQ0MsSUFBckIsQ0FBMEJOLENBQUMsQ0FBQ1csZUFBNUIsRUFBNkM7QUFBQ0MsTUFBQUEsUUFBUSxFQUFFO0FBQUNDLFFBQUFBLElBQUksRUFBRTtBQUFQO0FBQVgsS0FBN0MsRUFBK0VILE1BQS9FLEdBQXdGLENBQTVGLEVBQStGO0FBQzlGO0FBQ0EsS0FKbUMsQ0FNcEM7OztBQUNBTCxJQUFBQSxvQkFBb0IsQ0FBQ1MsT0FBckIsQ0FBOEJDLElBQUQsSUFBVTtBQUN0Q0EsTUFBQUEsSUFBSSxDQUFDTixLQUFMLENBQVdPLFVBQVgsQ0FBc0JDLElBQXRCLENBQTJCZixtQkFBM0I7QUFDQSxLQUZEO0FBR0E7QUFDQSxHQXhCb0MsQ0EwQnJDO0FBQ0E7OztBQUNBLFFBQU1nQixnQkFBZ0IsR0FBR2xCLENBQUMsQ0FBQ21CLGlCQUFGLENBQW9CLENBQzVDakIsbUJBRDRDLENBQXBCLEVBRXRCRixDQUFDLENBQUNvQixhQUFGLENBQWdCLGFBQWhCLENBRnNCLENBQXpCLENBNUJxQyxDQWdDckM7O0FBQ0EsUUFBTUMsT0FBTyxHQUFHcEIsSUFBSSxDQUFDSyxJQUFMLENBQVVOLENBQUMsQ0FBQ3FCLE9BQVosQ0FBaEIsQ0FqQ3FDLENBa0NyQzs7QUFDQUEsRUFBQUEsT0FBTyxDQUFDUCxPQUFSLENBQWlCQyxJQUFELElBQVU7QUFDekJBLElBQUFBLElBQUksQ0FBQ04sS0FBTCxDQUFXYSxJQUFYLENBQWdCQyxPQUFoQixDQUF3QkwsZ0JBQXhCO0FBQ0EsR0FGRDtBQUdBOztBQUVELFNBQVNNLG9CQUFULENBQThCeEIsQ0FBOUIsRUFBaUN5QixJQUFqQyxFQUF1QztBQUN0QyxTQUFPQSxJQUFJLENBQUNuQixJQUFMLENBQVVOLENBQUMsQ0FBQzBCLGdCQUFaLEVBQThCO0FBQ3BDQyxJQUFBQSxNQUFNLEVBQUU7QUFDUEMsTUFBQUEsSUFBSSxFQUFFLGtCQURDO0FBRVBELE1BQUFBLE1BQU0sRUFBRTtBQUFDQyxRQUFBQSxJQUFJLEVBQUU7QUFBUCxPQUZEO0FBR1BDLE1BQUFBLFFBQVEsRUFBRTtBQUFDaEIsUUFBQUEsSUFBSSxFQUFFO0FBQVA7QUFISCxLQUQ0QjtBQU1wQ2dCLElBQUFBLFFBQVEsRUFBRTtBQUFDaEIsTUFBQUEsSUFBSSxFQUFFO0FBQVA7QUFOMEIsR0FBOUIsQ0FBUDtBQVFBOztBQUVELFNBQVNpQixnQkFBVCxDQUEwQjlCLENBQTFCLEVBQTZCeUIsSUFBN0IsRUFBbUNaLElBQW5DLEVBQXlDO0FBQ3hDLFNBQU9ZLElBQUksQ0FBQ25CLElBQUwsQ0FBVU4sQ0FBQyxDQUFDMEIsZ0JBQVosRUFBOEI7QUFDcENDLElBQUFBLE1BQU0sRUFBRTtBQUFDZCxNQUFBQTtBQUFELEtBRDRCO0FBRXBDZ0IsSUFBQUEsUUFBUSxFQUFFO0FBQUNoQixNQUFBQSxJQUFJLEVBQUU7QUFBUDtBQUYwQixHQUE5QixDQUFQO0FBSUEsQyxDQUVEO0FBQ0E7OztBQUNBLFNBQVNrQixrQkFBVCxDQUE0Qi9CLENBQTVCLEVBQStCZ0MsWUFBL0IsRUFBNkNDLElBQTdDLEVBQW1EO0FBQ2xELFFBQU1DLFVBQVUsR0FBR0QsSUFBSSxDQUFDRSxHQUFMLENBQVVwQixJQUFELElBQVU7QUFDckM7QUFDQTtBQUNBLFFBQUlBLElBQUksQ0FBQ2EsSUFBTCxLQUFjLGtCQUFsQixFQUFzQztBQUNyQ2IsTUFBQUEsSUFBSSxDQUFDYSxJQUFMLEdBQVksaUJBQVo7QUFDQTs7QUFFRCxXQUFPYixJQUFQO0FBQ0EsR0FSa0IsQ0FBbkI7QUFTQSxTQUFPZixDQUFDLENBQUNvQyxjQUFGLENBQWlCcEMsQ0FBQyxDQUFDSSxVQUFGLENBQWE0QixZQUFiLENBQWpCLEVBQTZDRSxVQUE3QyxDQUFQO0FBQ0E7O0FBRUQsU0FBU0csaUJBQVQsQ0FBMkJyQyxDQUEzQixFQUE4QnlCLElBQTlCLEVBQW9DO0FBQ25DQSxFQUFBQSxJQUFJLENBQUNuQixJQUFMLENBQVVOLENBQUMsQ0FBQ3NDLFVBQVosRUFBd0I7QUFBQ3pCLElBQUFBLElBQUksRUFBRTtBQUFQLEdBQXhCLEVBQXVDMEIsV0FBdkMsQ0FBbUR2QyxDQUFDLENBQUNJLFVBQUYsQ0FBYSxRQUFiLENBQW5EO0FBQ0E7O0FBRWMsU0FBU29DLFdBQVQsQ0FBcUJDLElBQXJCLEVBQTJCQyxHQUEzQixFQUFnQztBQUM5QztBQUNBLFFBQU0xQyxDQUFDLEdBQUcwQyxHQUFHLENBQUNDLFdBQWQsQ0FGOEMsQ0FHOUM7O0FBQ0EsUUFBTTFDLElBQUksR0FBR0QsQ0FBQyxDQUFDeUMsSUFBSSxDQUFDakMsTUFBTixDQUFkLENBSjhDLENBTTlDOztBQUNBLFFBQU1vQyxjQUFjLEdBQUczQyxJQUFJLENBQUNLLElBQUwsQ0FBVU4sQ0FBQyxDQUFDNkMsd0JBQVosQ0FBdkIsQ0FQOEMsQ0FTOUM7QUFDQTs7QUFDQUQsRUFBQUEsY0FBYyxDQUFDOUIsT0FBZixDQUF3QmdDLElBQUQsSUFBVTtBQUNoQztBQUNBLFVBQU07QUFBQ3JDLE1BQUFBLEtBQUssRUFBRU07QUFBUixRQUFnQitCLElBQXRCLENBRmdDLENBR2hDOztBQUNBLFVBQU07QUFBQ0MsTUFBQUE7QUFBRCxRQUFnQmhDLElBQXRCOztBQUVBLGFBQVNpQyw2QkFBVCxHQUF5QztBQUN4QyxVQUFJaEQsQ0FBQyxDQUFDOEMsSUFBRCxDQUFELENBQVF4QyxJQUFSLENBQWFOLENBQUMsQ0FBQ2lELGNBQWYsRUFBK0I7QUFBQ0MsUUFBQUEsTUFBTSxFQUFFO0FBQUNyQyxVQUFBQSxJQUFJLEVBQUU7QUFBUDtBQUFULE9BQS9CLEVBQStESCxNQUEvRCxHQUF3RSxDQUE1RSxFQUErRTtBQUM5RTtBQUNBOztBQUNEVixNQUFBQSxDQUFDLENBQUM4QyxJQUFELENBQUQsQ0FBUVAsV0FBUixDQUFvQnZDLENBQUMsQ0FBQ21ELHdCQUFGLENBQTJCcEIsa0JBQWtCLENBQUMvQixDQUFELEVBQUksWUFBSixFQUFrQixDQUFDK0MsV0FBRCxDQUFsQixDQUE3QyxDQUFwQjtBQUNBLEtBWCtCLENBYWhDO0FBQ0E7QUFDQTs7O0FBQ0EsUUFBSUEsV0FBVyxDQUFDbkIsSUFBWixLQUFxQixZQUF6QixFQUF1QztBQUN0QztBQUNBLFlBQU07QUFBQ2YsUUFBQUE7QUFBRCxVQUFTa0MsV0FBZixDQUZzQyxDQUl0Qzs7QUFDQSxVQUFJSyxjQUFjLEdBQUduRCxJQUFJLENBQUNLLElBQUwsQ0FBVU4sQ0FBQyxDQUFDcUQsV0FBWixFQUF5QjtBQUFDQyxRQUFBQSxFQUFFLEVBQUU7QUFBQ3pDLFVBQUFBO0FBQUQ7QUFBTCxPQUF6QixDQUFyQjs7QUFDQSxVQUFJdUMsY0FBYyxDQUFDMUMsTUFBZixLQUEwQixDQUE5QixFQUFpQztBQUNoQzBDLFFBQUFBLGNBQWMsR0FBR25ELElBQUksQ0FBQ0ssSUFBTCxDQUFVTixDQUFDLENBQUN1RCxrQkFBWixFQUFnQztBQUFDRCxVQUFBQSxFQUFFLEVBQUU7QUFBQ3pDLFlBQUFBO0FBQUQ7QUFBTCxTQUFoQyxDQUFqQjtBQUNBOztBQUVEdUMsTUFBQUEsY0FBYyxDQUFDOUMsSUFBZixDQUFvQk4sQ0FBQyxDQUFDd0QsUUFBdEIsRUFBZ0M7QUFBQ0MsUUFBQUEsR0FBRyxFQUFFO0FBQUM1QyxVQUFBQSxJQUFJLEVBQUU7QUFBUDtBQUFOLE9BQWhDLEVBQXNEQyxPQUF0RCxDQUErRDRDLFlBQUQsSUFBa0I7QUFDL0UsY0FBTUMsc0JBQXNCLEdBQUczRCxDQUFDLENBQUMwRCxZQUFELENBQUQsQ0FBZ0JFLE9BQWhCLENBQXdCNUQsQ0FBQyxDQUFDdUQsa0JBQTFCLEVBQThDO0FBQzVFTSxVQUFBQSxJQUFJLEVBQUU7QUFDTGxDLFlBQUFBLE1BQU0sRUFBRTtBQUNQQyxjQUFBQSxJQUFJLEVBQUU7QUFEQyxhQURIO0FBSUxDLFlBQUFBLFFBQVEsRUFBRTtBQUFDaEIsY0FBQUEsSUFBSSxFQUFFO0FBQVA7QUFKTDtBQURzRSxTQUE5QyxDQUEvQjs7QUFRQSxZQUFJOEMsc0JBQXNCLENBQUNqRCxNQUF2QixLQUFrQyxDQUF0QyxFQUF5QztBQUN4QztBQUNBOztBQUNELGNBQU1vRCxnQkFBZ0IsR0FBR0osWUFBWSxDQUFDakQsS0FBYixDQUFtQkEsS0FBbkIsQ0FBeUJJLElBQWxEO0FBQ0E2QyxRQUFBQSxZQUFZLENBQUNqRCxLQUFiLENBQW1CZ0QsR0FBbkIsQ0FBdUI1QyxJQUF2QixHQUE4QixRQUE5QjtBQUNBbUMsUUFBQUEsNkJBQTZCO0FBQzdCakQsUUFBQUEsbUJBQW1CLENBQUNDLENBQUQsRUFBSUMsSUFBSixDQUFuQixDQWYrRSxDQWdCL0U7O0FBQ0EsWUFBSTZELGdCQUFnQixLQUFLLEtBQXpCLEVBQWdDO0FBQy9CO0FBQ0E7O0FBRURKLFFBQUFBLFlBQVksQ0FBQ2pELEtBQWIsQ0FBbUJBLEtBQW5CLENBQXlCSSxJQUF6QixHQUFnQyxRQUFoQztBQUNBYixRQUFBQSxDQUFDLENBQUMwRCxZQUFELENBQUQsQ0FBZ0JFLE9BQWhCLENBQXdCNUQsQ0FBQyxDQUFDK0QsY0FBMUIsRUFDRXpELElBREYsQ0FDT04sQ0FBQyxDQUFDc0MsVUFEVCxFQUNzQjBCLGNBQUQsSUFBb0I7QUFDdkMsY0FBSUEsY0FBYyxDQUFDcEMsSUFBZixLQUF3QixlQUE1QixFQUE2QztBQUM1QyxtQkFBTyxLQUFQO0FBQ0E7O0FBRUQsY0FBSW9DLGNBQWMsQ0FBQ25ELElBQWYsS0FBd0IsS0FBNUIsRUFBbUM7QUFDbEMsbUJBQU8sS0FBUDtBQUNBOztBQUVELGlCQUFPLElBQVA7QUFDQSxTQVhGLEVBWUUwQixXQVpGLENBWWN2QyxDQUFDLENBQUNJLFVBQUYsQ0FBYSxRQUFiLENBWmQ7QUFhQSxPQW5DRCxFQVZzQyxDQStDdEM7O0FBQ0EsWUFBTTZELGlCQUFpQixHQUFHekMsb0JBQW9CLENBQUN4QixDQUFELEVBQUlvRCxjQUFKLENBQTlDOztBQUVBLFVBQUlhLGlCQUFpQixDQUFDdkQsTUFBbEIsS0FBNkIsQ0FBakMsRUFBb0M7QUFDbkM7QUFDQSxPQXBEcUMsQ0FzRHRDOzs7QUFDQTJCLE1BQUFBLGlCQUFpQixDQUFDckMsQ0FBRCxFQUFJaUUsaUJBQUosQ0FBakI7QUFDQWpCLE1BQUFBLDZCQUE2QjtBQUM3QmpELE1BQUFBLG1CQUFtQixDQUFDQyxDQUFELEVBQUlDLElBQUosQ0FBbkI7QUFDQTtBQUNBOztBQUVELFVBQU1pRSxjQUFjLEdBQUdsRSxDQUFDLENBQUM4QyxJQUFELENBQUQsQ0FBUXhDLElBQVIsQ0FBYU4sQ0FBQyxDQUFDbUUsdUJBQWYsQ0FBdkI7O0FBQ0EsS0FBQyxNQUFNO0FBQ04sVUFBSUQsY0FBYyxDQUFDeEQsTUFBZixLQUEwQixDQUE5QixFQUFpQztBQUNoQztBQUNBOztBQUVEd0QsTUFBQUEsY0FBYyxDQUFDcEQsT0FBZixDQUF3QnNELENBQUQsSUFBTztBQUM3QjtBQUNBLFlBQUlwRSxDQUFDLENBQUNvRSxDQUFELENBQUQsQ0FBS1IsT0FBTCxDQUFhNUQsQ0FBQyxDQUFDcUUsVUFBZixFQUEyQjNELE1BQTNCLEtBQXNDLENBQTFDLEVBQTZDO0FBQzVDO0FBQ0E7O0FBRUQsWUFBSSxDQUFDMEQsQ0FBQyxDQUFDM0QsS0FBRixDQUFRNkQsTUFBVCxJQUFtQixDQUFDRixDQUFDLENBQUMzRCxLQUFGLENBQVE2RCxNQUFSLENBQWUsQ0FBZixDQUF4QixFQUEyQztBQUMxQztBQUNBOztBQUVELGNBQU16RCxJQUFJLEdBQUd1RCxDQUFDLENBQUMzRCxLQUFGLENBQVE2RCxNQUFSLENBQWUsQ0FBZixFQUFrQnpELElBQS9CO0FBQ0EsY0FBTTBELGFBQWEsR0FBR3pDLGdCQUFnQixDQUFDOUIsQ0FBRCxFQUFJQSxDQUFDLENBQUNvRSxDQUFELENBQUwsRUFBVXZELElBQVYsQ0FBdEM7O0FBQ0EsWUFBSTBELGFBQWEsQ0FBQzdELE1BQWQsS0FBeUIsQ0FBN0IsRUFBZ0M7QUFDL0I7QUFDQTs7QUFFRDJCLFFBQUFBLGlCQUFpQixDQUFDckMsQ0FBRCxFQUFJdUUsYUFBSixDQUFqQjtBQUNBdkIsUUFBQUEsNkJBQTZCO0FBQzdCakQsUUFBQUEsbUJBQW1CLENBQUNDLENBQUQsRUFBSUMsSUFBSixDQUFuQjtBQUNBLE9BbkJEO0FBb0JBO0FBQ0EsS0ExQkQ7O0FBNEJBLFFBQUk4QyxXQUFXLENBQUNuQixJQUFaLEtBQXFCLGdCQUF6QixFQUEyQztBQUMxQzVCLE1BQUFBLENBQUMsQ0FBQzhDLElBQUQsQ0FBRCxDQUFReEMsSUFBUixDQUFhTixDQUFDLENBQUNpRCxjQUFmLEVBQWdDdUIsUUFBRCxJQUFjO0FBQzVDLGNBQU1DLGFBQWEsR0FBR0QsUUFBUSxDQUFDRSxTQUFULENBQW1CLENBQW5CLEtBQXlCLEVBQS9DOztBQUNBLFlBQUlELGFBQWEsQ0FBQzdDLElBQWQsS0FBdUIsWUFBM0IsRUFBeUM7QUFDeEMsaUJBQU8sSUFBUDtBQUNBOztBQUVELGVBQU8sS0FBUDtBQUNBLE9BUEQsRUFRRWQsT0FSRixDQVFXNkQsUUFBRCxJQUFjO0FBQ3RCLGNBQU07QUFBQzlELFVBQUFBO0FBQUQsWUFBUzhELFFBQVEsQ0FBQ2xFLEtBQVQsQ0FBZWlFLFNBQWYsQ0FBeUIsQ0FBekIsQ0FBZixDQURzQixDQUd0Qjs7QUFDQSxZQUFJdEIsY0FBYyxHQUFHbkQsSUFBSSxDQUFDSyxJQUFMLENBQVVOLENBQUMsQ0FBQ3FELFdBQVosRUFBeUI7QUFBQ0MsVUFBQUEsRUFBRSxFQUFFO0FBQUN6QyxZQUFBQTtBQUFEO0FBQUwsU0FBekIsQ0FBckI7O0FBQ0EsWUFBSXVDLGNBQWMsQ0FBQzFDLE1BQWYsS0FBMEIsQ0FBOUIsRUFBaUM7QUFDaEMwQyxVQUFBQSxjQUFjLEdBQUduRCxJQUFJLENBQUNLLElBQUwsQ0FBVU4sQ0FBQyxDQUFDdUQsa0JBQVosRUFBZ0M7QUFBQ0QsWUFBQUEsRUFBRSxFQUFFO0FBQUN6QyxjQUFBQTtBQUFEO0FBQUwsV0FBaEMsQ0FBakI7QUFDQSxTQVBxQixDQVF0Qjs7O0FBQ0EsY0FBTW9ELGlCQUFpQixHQUFHekMsb0JBQW9CLENBQUN4QixDQUFELEVBQUlvRCxjQUFKLENBQTlDO0FBRUFBLFFBQUFBLGNBQWMsQ0FBQzlDLElBQWYsQ0FBb0JOLENBQUMsQ0FBQ3dELFFBQXRCLEVBQWdDO0FBQUNDLFVBQUFBLEdBQUcsRUFBRTtBQUFDNUMsWUFBQUEsSUFBSSxFQUFFO0FBQVA7QUFBTixTQUFoQyxFQUFzREMsT0FBdEQsQ0FBK0Q0QyxZQUFELElBQWtCO0FBQy9FLGdCQUFNQyxzQkFBc0IsR0FBRzNELENBQUMsQ0FBQzBELFlBQUQsQ0FBRCxDQUFnQkUsT0FBaEIsQ0FBd0I1RCxDQUFDLENBQUN1RCxrQkFBMUIsRUFBOEM7QUFDNUVNLFlBQUFBLElBQUksRUFBRTtBQUNMbEMsY0FBQUEsTUFBTSxFQUFFO0FBQ1BDLGdCQUFBQSxJQUFJLEVBQUU7QUFEQyxlQURIO0FBSUxDLGNBQUFBLFFBQVEsRUFBRTtBQUFDaEIsZ0JBQUFBLElBQUksRUFBRTtBQUFQO0FBSkw7QUFEc0UsV0FBOUMsQ0FBL0I7O0FBUUEsY0FBSThDLHNCQUFzQixDQUFDakQsTUFBdkIsS0FBa0MsQ0FBdEMsRUFBeUM7QUFDeEM7QUFDQTs7QUFDRCxnQkFBTW9ELGdCQUFnQixHQUFHSixZQUFZLENBQUNqRCxLQUFiLENBQW1CQSxLQUFuQixDQUF5QkksSUFBbEQ7QUFDQTZDLFVBQUFBLFlBQVksQ0FBQ2pELEtBQWIsQ0FBbUJnRCxHQUFuQixDQUF1QjVDLElBQXZCLEdBQThCLFFBQTlCO0FBQ0FtQyxVQUFBQSw2QkFBNkI7QUFDN0JqRCxVQUFBQSxtQkFBbUIsQ0FBQ0MsQ0FBRCxFQUFJQyxJQUFKLENBQW5CLENBZitFLENBZ0IvRTs7QUFDQSxjQUFJNkQsZ0JBQWdCLEtBQUssS0FBekIsRUFBZ0M7QUFDL0I7QUFDQTs7QUFFREosVUFBQUEsWUFBWSxDQUFDakQsS0FBYixDQUFtQkEsS0FBbkIsQ0FBeUJJLElBQXpCLEdBQWdDLFFBQWhDO0FBQ0FiLFVBQUFBLENBQUMsQ0FBQzBELFlBQUQsQ0FBRCxDQUFnQkUsT0FBaEIsQ0FBd0I1RCxDQUFDLENBQUMrRCxjQUExQixFQUNFekQsSUFERixDQUNPTixDQUFDLENBQUNzQyxVQURULEVBQ3NCMEIsY0FBRCxJQUFvQjtBQUN2QyxnQkFBSUEsY0FBYyxDQUFDcEMsSUFBZixLQUF3QixlQUE1QixFQUE2QztBQUM1QyxxQkFBTyxLQUFQO0FBQ0E7O0FBRUQsZ0JBQUlvQyxjQUFjLENBQUNuRCxJQUFmLEtBQXdCLEtBQTVCLEVBQW1DO0FBQ2xDLHFCQUFPLEtBQVA7QUFDQTs7QUFFRCxtQkFBTyxJQUFQO0FBQ0EsV0FYRixFQVlFMEIsV0FaRixDQVljdkMsQ0FBQyxDQUFDSSxVQUFGLENBQWEsUUFBYixDQVpkO0FBYUEsU0FuQ0Q7O0FBcUNBLFlBQUk2RCxpQkFBaUIsQ0FBQ3ZELE1BQWxCLEtBQTZCLENBQWpDLEVBQW9DO0FBQ25DO0FBQ0EsU0FsRHFCLENBb0R0Qjs7O0FBQ0EyQixRQUFBQSxpQkFBaUIsQ0FBQ3JDLENBQUQsRUFBSWlFLGlCQUFKLENBQWpCO0FBQ0FqQixRQUFBQSw2QkFBNkI7QUFDN0JqRCxRQUFBQSxtQkFBbUIsQ0FBQ0MsQ0FBRCxFQUFJQyxJQUFKLENBQW5CO0FBQ0E7QUFDQSxPQWpFRjtBQWtFQTs7QUFFREQsSUFBQUEsQ0FBQyxDQUFDOEMsSUFBRCxDQUFELENBQVF4QyxJQUFSLENBQWFOLENBQUMsQ0FBQ3dELFFBQWYsRUFBeUI7QUFBQ0MsTUFBQUEsR0FBRyxFQUFFO0FBQUM1QyxRQUFBQSxJQUFJLEVBQUU7QUFBUDtBQUFOLEtBQXpCLEVBQ0VDLE9BREYsQ0FDVzRDLFlBQUQsSUFBa0I7QUFDMUIsWUFBTUMsc0JBQXNCLEdBQUczRCxDQUFDLENBQUMwRCxZQUFELENBQUQsQ0FBZ0JFLE9BQWhCLENBQXdCNUQsQ0FBQyxDQUFDdUQsa0JBQTFCLEVBQThDO0FBQzVFTSxRQUFBQSxJQUFJLEVBQUU7QUFDTGxDLFVBQUFBLE1BQU0sRUFBRTtBQUNQQyxZQUFBQSxJQUFJLEVBQUU7QUFEQyxXQURIO0FBSUxDLFVBQUFBLFFBQVEsRUFBRTtBQUFDaEIsWUFBQUEsSUFBSSxFQUFFO0FBQVA7QUFKTDtBQURzRSxPQUE5QyxDQUEvQjs7QUFRQSxVQUFJOEMsc0JBQXNCLENBQUNqRCxNQUF2QixLQUFrQyxDQUF0QyxFQUF5QztBQUN4QztBQUNBOztBQUNELFlBQU1vRCxnQkFBZ0IsR0FBR0osWUFBWSxDQUFDakQsS0FBYixDQUFtQkEsS0FBbkIsQ0FBeUJJLElBQWxEO0FBQ0E2QyxNQUFBQSxZQUFZLENBQUNqRCxLQUFiLENBQW1CZ0QsR0FBbkIsQ0FBdUI1QyxJQUF2QixHQUE4QixRQUE5QjtBQUNBbUMsTUFBQUEsNkJBQTZCO0FBQzdCakQsTUFBQUEsbUJBQW1CLENBQUNDLENBQUQsRUFBSUMsSUFBSixDQUFuQixDQWYwQixDQWdCMUI7O0FBQ0EsVUFBSTZELGdCQUFnQixLQUFLLEtBQXpCLEVBQWdDO0FBQy9CO0FBQ0E7O0FBRURKLE1BQUFBLFlBQVksQ0FBQ2pELEtBQWIsQ0FBbUJBLEtBQW5CLENBQXlCSSxJQUF6QixHQUFnQyxRQUFoQztBQUNBYixNQUFBQSxDQUFDLENBQUMwRCxZQUFELENBQUQsQ0FBZ0JFLE9BQWhCLENBQXdCNUQsQ0FBQyxDQUFDK0QsY0FBMUIsRUFDRXpELElBREYsQ0FDT04sQ0FBQyxDQUFDc0MsVUFEVCxFQUNzQjBCLGNBQUQsSUFBb0I7QUFDdkMsWUFBSUEsY0FBYyxDQUFDcEMsSUFBZixLQUF3QixlQUE1QixFQUE2QztBQUM1QyxpQkFBTyxLQUFQO0FBQ0E7O0FBRUQsWUFBSW9DLGNBQWMsQ0FBQ25ELElBQWYsS0FBd0IsS0FBNUIsRUFBbUM7QUFDbEMsaUJBQU8sS0FBUDtBQUNBOztBQUVELGVBQU8sSUFBUDtBQUNBLE9BWEYsRUFZRTBCLFdBWkYsQ0FZY3ZDLENBQUMsQ0FBQ0ksVUFBRixDQUFhLFFBQWIsQ0FaZDtBQWFBLEtBcENGO0FBc0NBSixJQUFBQSxDQUFDLENBQUM4QyxJQUFELENBQUQsQ0FBUXhDLElBQVIsQ0FBYU4sQ0FBQyxDQUFDNEUsZ0JBQWYsRUFBaUM7QUFBQ25CLE1BQUFBLEdBQUcsRUFBRTtBQUFDNUMsUUFBQUEsSUFBSSxFQUFFO0FBQVA7QUFBTixLQUFqQyxFQUNFQyxPQURGLENBQ1crRCxVQUFELElBQWdCO0FBQ3hCLFlBQU1DLElBQUksR0FBR0QsVUFBVSxDQUFDcEUsS0FBWCxDQUFpQkEsS0FBOUI7O0FBQ0EsVUFBSSxDQUFDcUUsSUFBSSxDQUFDUixNQUFMLENBQVksQ0FBWixDQUFMLEVBQXFCO0FBQ3BCO0FBQ0E7O0FBQ0QsWUFBTVMsaUJBQWlCLEdBQUdELElBQUksQ0FBQ1IsTUFBTCxDQUFZLENBQVosRUFBZXpELElBQXpDO0FBQ0EsWUFBTTBELGFBQWEsR0FBR3pDLGdCQUFnQixDQUFDOUIsQ0FBRCxFQUFJQSxDQUFDLENBQUM2RSxVQUFELENBQUwsRUFBbUJFLGlCQUFuQixDQUF0QztBQUNBMUMsTUFBQUEsaUJBQWlCLENBQUNyQyxDQUFELEVBQUl1RSxhQUFKLENBQWpCOztBQUNBLFVBQUlBLGFBQWEsQ0FBQzdELE1BQWQsS0FBeUIsQ0FBN0IsRUFBZ0M7QUFDL0I7QUFDQTs7QUFDRHNDLE1BQUFBLDZCQUE2QjtBQUM3QmpELE1BQUFBLG1CQUFtQixDQUFDQyxDQUFELEVBQUlDLElBQUosQ0FBbkI7QUFDQSxLQWRGO0FBZ0JBRCxJQUFBQSxDQUFDLENBQUM4QyxJQUFELENBQUQsQ0FBUXhDLElBQVIsQ0FBYU4sQ0FBQyxDQUFDNEUsZ0JBQWYsRUFBaUM7QUFBQ25CLE1BQUFBLEdBQUcsRUFBRTtBQUFDNUMsUUFBQUEsSUFBSSxFQUFFO0FBQVA7QUFBTixLQUFqQyxFQUNFQyxPQURGLENBQ1crRCxVQUFELElBQWdCO0FBQ3hCLFlBQU1DLElBQUksR0FBR0QsVUFBVSxDQUFDcEUsS0FBWCxDQUFpQkEsS0FBOUI7O0FBQ0EsVUFBSSxDQUFDcUUsSUFBSSxDQUFDUixNQUFMLENBQVksQ0FBWixDQUFMLEVBQXFCO0FBQ3BCO0FBQ0E7O0FBQ0QsWUFBTVMsaUJBQWlCLEdBQUdELElBQUksQ0FBQ1IsTUFBTCxDQUFZLENBQVosRUFBZXpELElBQXpDO0FBQ0EsWUFBTTBELGFBQWEsR0FBR3pDLGdCQUFnQixDQUFDOUIsQ0FBRCxFQUFJQSxDQUFDLENBQUM2RSxVQUFELENBQUwsRUFBbUJFLGlCQUFuQixDQUF0QztBQUNBMUMsTUFBQUEsaUJBQWlCLENBQUNyQyxDQUFELEVBQUl1RSxhQUFKLENBQWpCOztBQUNBLFVBQUlBLGFBQWEsQ0FBQzdELE1BQWQsS0FBeUIsQ0FBN0IsRUFBZ0M7QUFDL0I7QUFDQTs7QUFDRHNDLE1BQUFBLDZCQUE2QjtBQUM3QmpELE1BQUFBLG1CQUFtQixDQUFDQyxDQUFELEVBQUlDLElBQUosQ0FBbkI7QUFDQSxLQWRGO0FBZ0JBLFVBQU1nRSxpQkFBaUIsR0FBR3pDLG9CQUFvQixDQUFDeEIsQ0FBRCxFQUFJQSxDQUFDLENBQUM4QyxJQUFELENBQUwsQ0FBOUM7QUFDQSxVQUFNeUIsYUFBYSxHQUFHekMsZ0JBQWdCLENBQUM5QixDQUFELEVBQUlBLENBQUMsQ0FBQzhDLElBQUQsQ0FBTCxFQUFhLE9BQWIsQ0FBdEMsQ0F0UGdDLENBd1BoQzs7QUFDQVQsSUFBQUEsaUJBQWlCLENBQUNyQyxDQUFELEVBQUlpRSxpQkFBSixDQUFqQjtBQUNBNUIsSUFBQUEsaUJBQWlCLENBQUNyQyxDQUFELEVBQUl1RSxhQUFKLENBQWpCOztBQUVBLFFBQUlOLGlCQUFpQixDQUFDdkQsTUFBbEIsS0FBNkIsQ0FBN0IsSUFBa0M2RCxhQUFhLENBQUM3RCxNQUFkLEtBQXlCLENBQS9ELEVBQWtFO0FBQ2pFO0FBQ0E7O0FBRURzQyxJQUFBQSw2QkFBNkI7QUFDN0JqRCxJQUFBQSxtQkFBbUIsQ0FBQ0MsQ0FBRCxFQUFJQyxJQUFKLENBQW5CO0FBQ0E7QUFDQSxHQW5RRDtBQXFRQSxTQUFPQSxJQUFJLENBQUMrRSxRQUFMLEVBQVA7QUFDQSIsInNvdXJjZVJvb3QiOiIvVXNlcnMva3VuZy9Qcm9qZWN0cy90cmFpbmluZ3MvdGhlLWFydHMiLCJzb3VyY2VzQ29udGVudCI6WyJmdW5jdGlvbiBhZGRXaXRoUm91dGVySW1wb3J0KGosIHJvb3QpIHtcblx0Ly8gV2UgY3JlYXRlIGFuIGltcG9ydCBzcGVjaWZpZXIsIHRoaXMgaXMgdGhlIHZhbHVlIG9mIGFuIGltcG9ydCwgZWc6XG5cdC8vIGltcG9ydCB7d2l0aFJvdXRlcn0gZnJvbSAnbmV4dC9yb3V0ZXJcblx0Ly8gVGhlIHNwZWNpZmllciB3b3VsZCBiZSBgd2l0aFJvdXRlcmBcblx0Y29uc3Qgd2l0aFJvdXRlclNwZWNpZmllciA9IGouaW1wb3J0U3BlY2lmaWVyKGouaWRlbnRpZmllcignd2l0aFJvdXRlcicpKTtcblxuXHQvLyBDaGVjayBpZiB0aGlzIGZpbGUgaXMgYWxyZWFkeSBpbXBvcnQgYG5leHQvcm91dGVyYFxuXHQvLyBzbyB0aGF0IHdlIGNhbiBqdXN0IGF0dGFjaCBgd2l0aFJvdXRlcmAgaW5zdGVhZCBvZiBjcmVhdGluZyBhIG5ldyBgaW1wb3J0YCBub2RlXG5cdGNvbnN0IG9yaWdpbmFsUm91dGVySW1wb3J0ID0gcm9vdC5maW5kKGouSW1wb3J0RGVjbGFyYXRpb24sIHtcblx0XHRzb3VyY2U6IHtcblx0XHRcdHZhbHVlOiAnbmV4dC9yb3V0ZXInXG5cdFx0fVxuXHR9KTtcblx0aWYgKG9yaWdpbmFsUm91dGVySW1wb3J0Lmxlbmd0aCA+IDApIHtcblx0XHQvLyBDaGVjayBpZiBgd2l0aFJvdXRlcmAgaXMgYWxyZWFkeSBpbXBvcnRlZC4gSW4gdGhhdCBjYXNlIHdlIGRvbid0IGhhdmUgdG8gZG8gYW55dGhpbmdcblx0XHRpZiAob3JpZ2luYWxSb3V0ZXJJbXBvcnQuZmluZChqLkltcG9ydFNwZWNpZmllciwge2ltcG9ydGVkOiB7bmFtZTogJ3dpdGhSb3V0ZXInfX0pLmxlbmd0aCA+IDApIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHQvLyBBdHRhY2ggYHdpdGhSb3V0ZXJgIHRvIHRoZSBleGlzdGluZyBgbmV4dC9yb3V0ZXJgIGltcG9ydCBub2RlXG5cdFx0b3JpZ2luYWxSb3V0ZXJJbXBvcnQuZm9yRWFjaCgobm9kZSkgPT4ge1xuXHRcdFx0bm9kZS52YWx1ZS5zcGVjaWZpZXJzLnB1c2god2l0aFJvdXRlclNwZWNpZmllcik7XG5cdFx0fSk7XG5cdFx0cmV0dXJuO1xuXHR9XG5cblx0Ly8gQ3JlYXRlIGltcG9ydCBub2RlXG5cdC8vIGltcG9ydCB7d2l0aFJvdXRlcn0gZnJvbSAnbmV4dC9yb3V0ZXInXG5cdGNvbnN0IHdpdGhSb3V0ZXJJbXBvcnQgPSBqLmltcG9ydERlY2xhcmF0aW9uKFtcblx0XHR3aXRoUm91dGVyU3BlY2lmaWVyXG5cdF0sIGouc3RyaW5nTGl0ZXJhbCgnbmV4dC9yb3V0ZXInKSk7XG5cblx0Ly8gRmluZCB0aGUgUHJvZ3JhbSwgdGhpcyBpcyB0aGUgdG9wIGxldmVsIEFTVCBub2RlXG5cdGNvbnN0IFByb2dyYW0gPSByb290LmZpbmQoai5Qcm9ncmFtKTtcblx0Ly8gQXR0YWNoIHRoZSBpbXBvcnQgYXQgdGhlIHRvcCBvZiB0aGUgYm9keVxuXHRQcm9ncmFtLmZvckVhY2goKG5vZGUpID0+IHtcblx0XHRub2RlLnZhbHVlLmJvZHkudW5zaGlmdCh3aXRoUm91dGVySW1wb3J0KTtcblx0fSk7XG59XG5cbmZ1bmN0aW9uIGdldFRoaXNQcm9wc1VybE5vZGVzKGosIHRyZWUpIHtcblx0cmV0dXJuIHRyZWUuZmluZChqLk1lbWJlckV4cHJlc3Npb24sIHtcblx0XHRvYmplY3Q6IHtcblx0XHRcdHR5cGU6ICdNZW1iZXJFeHByZXNzaW9uJyxcblx0XHRcdG9iamVjdDoge3R5cGU6ICdUaGlzRXhwcmVzc2lvbid9LFxuXHRcdFx0cHJvcGVydHk6IHtuYW1lOiAncHJvcHMnfVxuXHRcdH0sXG5cdFx0cHJvcGVydHk6IHtuYW1lOiAndXJsJ31cblx0fSk7XG59XG5cbmZ1bmN0aW9uIGdldFByb3BzVXJsTm9kZXMoaiwgdHJlZSwgbmFtZSkge1xuXHRyZXR1cm4gdHJlZS5maW5kKGouTWVtYmVyRXhwcmVzc2lvbiwge1xuXHRcdG9iamVjdDoge25hbWV9LFxuXHRcdHByb3BlcnR5OiB7bmFtZTogJ3VybCd9XG5cdH0pO1xufVxuXG4vLyBXcmFwcyB0aGUgcHJvdmlkZWQgbm9kZSBpbiBhIGZ1bmN0aW9uIGNhbGxcbi8vIEZvciBleGFtcGxlIGlmIGBmdW5jdGlvbk5hbWVgIGlzIGB3aXRoUm91dGVyYCBpdCB3aWxsIHdyYXAgdGhlIHByb3ZpZGVkIG5vZGUgaW4gYHdpdGhSb3V0ZXIoTk9ERV9DT05URU5UKWBcbmZ1bmN0aW9uIHdyYXBOb2RlSW5GdW5jdGlvbihqLCBmdW5jdGlvbk5hbWUsIGFyZ3MpIHtcblx0Y29uc3QgbWFwcGVkQXJncyA9IGFyZ3MubWFwKChub2RlKSA9PiB7XG5cdFx0Ly8gSWYgdGhlIG5vZGUgaXMgYSBDbGFzc0RlY2xhcmF0aW9uIHdlIGhhdmUgdG8gdHVybiBpdCBpbnRvIGEgQ2xhc3NFeHByZXNzaW9uXG5cdFx0Ly8gc2luY2UgQ2xhc3NEZWNsYXJhdGlvbnMgY2FuJ3QgYmUgd3JhcHBlZCBpbiBhIGZ1bmN0aW9uXG5cdFx0aWYgKG5vZGUudHlwZSA9PT0gJ0NsYXNzRGVjbGFyYXRpb24nKSB7XG5cdFx0XHRub2RlLnR5cGUgPSAnQ2xhc3NFeHByZXNzaW9uJztcblx0XHR9XG5cblx0XHRyZXR1cm4gbm9kZTtcblx0fSk7XG5cdHJldHVybiBqLmNhbGxFeHByZXNzaW9uKGouaWRlbnRpZmllcihmdW5jdGlvbk5hbWUpLCBtYXBwZWRBcmdzKTtcbn1cblxuZnVuY3Rpb24gdHVyblVybEludG9Sb3V0ZXIoaiwgdHJlZSkge1xuXHR0cmVlLmZpbmQoai5JZGVudGlmaWVyLCB7bmFtZTogJ3VybCd9KS5yZXBsYWNlV2l0aChqLmlkZW50aWZpZXIoJ3JvdXRlcicpKTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gdHJhbnNmb3JtZXIoZmlsZSwgYXBpKSB7XG5cdC8vIGogaXMganVzdCBhIHNob3J0aGFuZCBmb3IgdGhlIGpzY29kZXNoaWZ0IGFwaVxuXHRjb25zdCBqID0gYXBpLmpzY29kZXNoaWZ0O1xuXHQvLyB0aGlzIGlzIHRoZSBBU1Qgcm9vdCBvbiB3aGljaCB3ZSBjYW4gY2FsbCBtZXRob2RzIGxpa2UgYC5maW5kYFxuXHRjb25zdCByb290ID0gaihmaWxlLnNvdXJjZSk7XG5cblx0Ly8gV2Ugc2VhcmNoIGZvciBgZXhwb3J0IGRlZmF1bHRgXG5cdGNvbnN0IGRlZmF1bHRFeHBvcnRzID0gcm9vdC5maW5kKGouRXhwb3J0RGVmYXVsdERlY2xhcmF0aW9uKTtcblxuXHQvLyBXZSBsb29wIG92ZXIgdGhlIGBleHBvcnQgZGVmYXVsdGAgaW5zdGFuY2VzXG5cdC8vIFRoaXMgaXMganVzdCBob3cganNjb2Rlc2hpZnQgd29ya3MsIHRoZXJlIGNhbiBvbmx5IGJlIG9uZSBleHBvcnQgZGVmYXVsdCBpbnN0YW5jZVxuXHRkZWZhdWx0RXhwb3J0cy5mb3JFYWNoKChydWxlKSA9PiB7XG5cdFx0Ly8gcnVsZS52YWx1ZSBpcyBhbiBBU1Qgbm9kZVxuXHRcdGNvbnN0IHt2YWx1ZTogbm9kZX0gPSBydWxlO1xuXHRcdC8vIGRlY2xhcmF0aW9uIGhvbGRzIHRoZSBBU1Qgbm9kZSBmb3Igd2hhdCBjb21lcyBhZnRlciBgZXhwb3J0IGRlZmF1bHRgXG5cdFx0Y29uc3Qge2RlY2xhcmF0aW9ufSA9IG5vZGU7XG5cblx0XHRmdW5jdGlvbiB3cmFwRGVmYXVsdEV4cG9ydEluV2l0aFJvdXRlcigpIHtcblx0XHRcdGlmIChqKHJ1bGUpLmZpbmQoai5DYWxsRXhwcmVzc2lvbiwge2NhbGxlZToge25hbWU6ICd3aXRoUm91dGVyJ319KS5sZW5ndGggPiAwKSB7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblx0XHRcdGoocnVsZSkucmVwbGFjZVdpdGgoai5leHBvcnREZWZhdWx0RGVjbGFyYXRpb24od3JhcE5vZGVJbkZ1bmN0aW9uKGosICd3aXRoUm91dGVyJywgW2RlY2xhcmF0aW9uXSkpKTtcblx0XHR9XG5cblx0XHQvLyBUaGUgYElkZW50aWZpZXJgIHR5cGUgaXMgZ2l2ZW4gaW4gdGhpcyBjYXNlOlxuXHRcdC8vIGV4cG9ydCBkZWZhdWx0IFRlc3Rcblx0XHQvLyB3aGVyZSBgVGVzdGAgaXMgdGhlIGlkZW50aWZpZXJcblx0XHRpZiAoZGVjbGFyYXRpb24udHlwZSA9PT0gJ0lkZW50aWZpZXInKSB7XG5cdFx0XHQvLyB0aGUgdmFyaWFibGUgbmFtZVxuXHRcdFx0Y29uc3Qge25hbWV9ID0gZGVjbGFyYXRpb247XG5cblx0XHRcdC8vIGZpbmQgdGhlIGltcGxlbWVudGF0aW9uIG9mIHRoZSB2YXJpYWJsZSwgY2FuIGJlIGEgY2xhc3MsIGZ1bmN0aW9uLCBldGNcblx0XHRcdGxldCBpbXBsZW1lbnRhdGlvbiA9IHJvb3QuZmluZChqLkRlY2xhcmF0aW9uLCB7aWQ6IHtuYW1lfX0pO1xuXHRcdFx0aWYgKGltcGxlbWVudGF0aW9uLmxlbmd0aCA9PT0gMCkge1xuXHRcdFx0XHRpbXBsZW1lbnRhdGlvbiA9IHJvb3QuZmluZChqLlZhcmlhYmxlRGVjbGFyYXRvciwge2lkOiB7bmFtZX19KTtcblx0XHRcdH1cblxuXHRcdFx0aW1wbGVtZW50YXRpb24uZmluZChqLlByb3BlcnR5LCB7a2V5OiB7bmFtZTogJ3VybCd9fSkuZm9yRWFjaCgocHJvcGVydHlSdWxlKSA9PiB7XG5cdFx0XHRcdGNvbnN0IGlzVGhpc1Byb3BzRGVzdHJ1Y3R1cmUgPSBqKHByb3BlcnR5UnVsZSkuY2xvc2VzdChqLlZhcmlhYmxlRGVjbGFyYXRvciwge1xuXHRcdFx0XHRcdGluaXQ6IHtcblx0XHRcdFx0XHRcdG9iamVjdDoge1xuXHRcdFx0XHRcdFx0XHR0eXBlOiAnVGhpc0V4cHJlc3Npb24nXG5cdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0cHJvcGVydHk6IHtuYW1lOiAncHJvcHMnfVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSk7XG5cdFx0XHRcdGlmIChpc1RoaXNQcm9wc0Rlc3RydWN0dXJlLmxlbmd0aCA9PT0gMCkge1xuXHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0fVxuXHRcdFx0XHRjb25zdCBvcmlnaW5hbEtleVZhbHVlID0gcHJvcGVydHlSdWxlLnZhbHVlLnZhbHVlLm5hbWU7XG5cdFx0XHRcdHByb3BlcnR5UnVsZS52YWx1ZS5rZXkubmFtZSA9ICdyb3V0ZXInO1xuXHRcdFx0XHR3cmFwRGVmYXVsdEV4cG9ydEluV2l0aFJvdXRlcigpO1xuXHRcdFx0XHRhZGRXaXRoUm91dGVySW1wb3J0KGosIHJvb3QpO1xuXHRcdFx0XHQvLyBJZiB0aGUgcHJvcGVydHkgaXMgcmVhc3NpZ25lZCB0byBhbm90aGVyIHZhcmlhYmxlIHdlIGRvbid0IGhhdmUgdG8gdHJhbnNmb3JtIGl0XG5cdFx0XHRcdGlmIChvcmlnaW5hbEtleVZhbHVlICE9PSAndXJsJykge1xuXHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdHByb3BlcnR5UnVsZS52YWx1ZS52YWx1ZS5uYW1lID0gJ3JvdXRlcic7XG5cdFx0XHRcdGoocHJvcGVydHlSdWxlKS5jbG9zZXN0KGouQmxvY2tTdGF0ZW1lbnQpXG5cdFx0XHRcdFx0LmZpbmQoai5JZGVudGlmaWVyLCAoaWRlbnRpZmllck5vZGUpID0+IHtcblx0XHRcdFx0XHRcdGlmIChpZGVudGlmaWVyTm9kZS50eXBlID09PSAnSlNYSWRlbnRpZmllcicpIHtcblx0XHRcdFx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRpZiAoaWRlbnRpZmllck5vZGUubmFtZSAhPT0gJ3VybCcpIHtcblx0XHRcdFx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdFx0XHR9KVxuXHRcdFx0XHRcdC5yZXBsYWNlV2l0aChqLmlkZW50aWZpZXIoJ3JvdXRlcicpKTtcblx0XHRcdH0pO1xuXG5cdFx0XHQvLyBGaW5kIHVzYWdlIG9mIGB0aGlzLnByb3BzLnVybGBcblx0XHRcdGNvbnN0IHRoaXNQcm9wc1VybFVzYWdlID0gZ2V0VGhpc1Byb3BzVXJsTm9kZXMoaiwgaW1wbGVtZW50YXRpb24pO1xuXG5cdFx0XHRpZiAodGhpc1Byb3BzVXJsVXNhZ2UubGVuZ3RoID09PSAwKSB7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblxuXHRcdFx0Ly8gcmVuYW1lIGB1cmxgIHRvIGByb3V0ZXJgXG5cdFx0XHR0dXJuVXJsSW50b1JvdXRlcihqLCB0aGlzUHJvcHNVcmxVc2FnZSk7XG5cdFx0XHR3cmFwRGVmYXVsdEV4cG9ydEluV2l0aFJvdXRlcigpO1xuXHRcdFx0YWRkV2l0aFJvdXRlckltcG9ydChqLCByb290KTtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHRjb25zdCBhcnJvd0Z1bmN0aW9ucyA9IGoocnVsZSkuZmluZChqLkFycm93RnVuY3Rpb25FeHByZXNzaW9uKTtcblx0XHQoKCkgPT4ge1xuXHRcdFx0aWYgKGFycm93RnVuY3Rpb25zLmxlbmd0aCA9PT0gMCkge1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cblx0XHRcdGFycm93RnVuY3Rpb25zLmZvckVhY2goKHIpID0+IHtcblx0XHRcdFx0Ly8gVGhpcyBtYWtlcyBzdXJlIHdlIGRvbid0IG1hdGNoIG5lc3RlZCBmdW5jdGlvbnMsIG9ubHkgdGhlIHRvcCBvbmVcblx0XHRcdFx0aWYgKGoocikuY2xvc2VzdChqLkV4cHJlc3Npb24pLmxlbmd0aCAhPT0gMCkge1xuXHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGlmICghci52YWx1ZS5wYXJhbXMgfHwgIXIudmFsdWUucGFyYW1zWzBdKSB7XG5cdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Y29uc3QgbmFtZSA9IHIudmFsdWUucGFyYW1zWzBdLm5hbWU7XG5cdFx0XHRcdGNvbnN0IHByb3BzVXJsVXNhZ2UgPSBnZXRQcm9wc1VybE5vZGVzKGosIGoociksIG5hbWUpO1xuXHRcdFx0XHRpZiAocHJvcHNVcmxVc2FnZS5sZW5ndGggPT09IDApIHtcblx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdH1cblxuXHRcdFx0XHR0dXJuVXJsSW50b1JvdXRlcihqLCBwcm9wc1VybFVzYWdlKTtcblx0XHRcdFx0d3JhcERlZmF1bHRFeHBvcnRJbldpdGhSb3V0ZXIoKTtcblx0XHRcdFx0YWRkV2l0aFJvdXRlckltcG9ydChqLCByb290KTtcblx0XHRcdH0pO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH0pKCk7XG5cblx0XHRpZiAoZGVjbGFyYXRpb24udHlwZSA9PT0gJ0NhbGxFeHByZXNzaW9uJykge1xuXHRcdFx0aihydWxlKS5maW5kKGouQ2FsbEV4cHJlc3Npb24sIChoYXlzdGFjaykgPT4ge1xuXHRcdFx0XHRjb25zdCBmaXJzdEFyZ3VtZW50ID0gaGF5c3RhY2suYXJndW1lbnRzWzBdIHx8IHt9O1xuXHRcdFx0XHRpZiAoZmlyc3RBcmd1bWVudC50eXBlID09PSAnSWRlbnRpZmllcicpIHtcblx0XHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdH0pXG5cdFx0XHRcdC5mb3JFYWNoKChjYWxsUnVsZSkgPT4ge1xuXHRcdFx0XHRcdGNvbnN0IHtuYW1lfSA9IGNhbGxSdWxlLnZhbHVlLmFyZ3VtZW50c1swXTtcblxuXHRcdFx0XHRcdC8vIGZpbmQgdGhlIGltcGxlbWVudGF0aW9uIG9mIHRoZSB2YXJpYWJsZSwgY2FuIGJlIGEgY2xhc3MsIGZ1bmN0aW9uLCBldGNcblx0XHRcdFx0XHRsZXQgaW1wbGVtZW50YXRpb24gPSByb290LmZpbmQoai5EZWNsYXJhdGlvbiwge2lkOiB7bmFtZX19KTtcblx0XHRcdFx0XHRpZiAoaW1wbGVtZW50YXRpb24ubGVuZ3RoID09PSAwKSB7XG5cdFx0XHRcdFx0XHRpbXBsZW1lbnRhdGlvbiA9IHJvb3QuZmluZChqLlZhcmlhYmxlRGVjbGFyYXRvciwge2lkOiB7bmFtZX19KTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0Ly8gRmluZCB1c2FnZSBvZiBgdGhpcy5wcm9wcy51cmxgXG5cdFx0XHRcdFx0Y29uc3QgdGhpc1Byb3BzVXJsVXNhZ2UgPSBnZXRUaGlzUHJvcHNVcmxOb2RlcyhqLCBpbXBsZW1lbnRhdGlvbik7XG5cblx0XHRcdFx0XHRpbXBsZW1lbnRhdGlvbi5maW5kKGouUHJvcGVydHksIHtrZXk6IHtuYW1lOiAndXJsJ319KS5mb3JFYWNoKChwcm9wZXJ0eVJ1bGUpID0+IHtcblx0XHRcdFx0XHRcdGNvbnN0IGlzVGhpc1Byb3BzRGVzdHJ1Y3R1cmUgPSBqKHByb3BlcnR5UnVsZSkuY2xvc2VzdChqLlZhcmlhYmxlRGVjbGFyYXRvciwge1xuXHRcdFx0XHRcdFx0XHRpbml0OiB7XG5cdFx0XHRcdFx0XHRcdFx0b2JqZWN0OiB7XG5cdFx0XHRcdFx0XHRcdFx0XHR0eXBlOiAnVGhpc0V4cHJlc3Npb24nXG5cdFx0XHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdFx0XHRwcm9wZXJ0eToge25hbWU6ICdwcm9wcyd9XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0aWYgKGlzVGhpc1Byb3BzRGVzdHJ1Y3R1cmUubGVuZ3RoID09PSAwKSB7XG5cdFx0XHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdGNvbnN0IG9yaWdpbmFsS2V5VmFsdWUgPSBwcm9wZXJ0eVJ1bGUudmFsdWUudmFsdWUubmFtZTtcblx0XHRcdFx0XHRcdHByb3BlcnR5UnVsZS52YWx1ZS5rZXkubmFtZSA9ICdyb3V0ZXInO1xuXHRcdFx0XHRcdFx0d3JhcERlZmF1bHRFeHBvcnRJbldpdGhSb3V0ZXIoKTtcblx0XHRcdFx0XHRcdGFkZFdpdGhSb3V0ZXJJbXBvcnQoaiwgcm9vdCk7XG5cdFx0XHRcdFx0XHQvLyBJZiB0aGUgcHJvcGVydHkgaXMgcmVhc3NpZ25lZCB0byBhbm90aGVyIHZhcmlhYmxlIHdlIGRvbid0IGhhdmUgdG8gdHJhbnNmb3JtIGl0XG5cdFx0XHRcdFx0XHRpZiAob3JpZ2luYWxLZXlWYWx1ZSAhPT0gJ3VybCcpIHtcblx0XHRcdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRwcm9wZXJ0eVJ1bGUudmFsdWUudmFsdWUubmFtZSA9ICdyb3V0ZXInO1xuXHRcdFx0XHRcdFx0aihwcm9wZXJ0eVJ1bGUpLmNsb3Nlc3Qoai5CbG9ja1N0YXRlbWVudClcblx0XHRcdFx0XHRcdFx0LmZpbmQoai5JZGVudGlmaWVyLCAoaWRlbnRpZmllck5vZGUpID0+IHtcblx0XHRcdFx0XHRcdFx0XHRpZiAoaWRlbnRpZmllck5vZGUudHlwZSA9PT0gJ0pTWElkZW50aWZpZXInKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRcdFx0aWYgKGlkZW50aWZpZXJOb2RlLm5hbWUgIT09ICd1cmwnKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHRcdFx0XHRcdH0pXG5cdFx0XHRcdFx0XHRcdC5yZXBsYWNlV2l0aChqLmlkZW50aWZpZXIoJ3JvdXRlcicpKTtcblx0XHRcdFx0XHR9KTtcblxuXHRcdFx0XHRcdGlmICh0aGlzUHJvcHNVcmxVc2FnZS5sZW5ndGggPT09IDApIHtcblx0XHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHQvLyByZW5hbWUgYHVybGAgdG8gYHJvdXRlcmBcblx0XHRcdFx0XHR0dXJuVXJsSW50b1JvdXRlcihqLCB0aGlzUHJvcHNVcmxVc2FnZSk7XG5cdFx0XHRcdFx0d3JhcERlZmF1bHRFeHBvcnRJbldpdGhSb3V0ZXIoKTtcblx0XHRcdFx0XHRhZGRXaXRoUm91dGVySW1wb3J0KGosIHJvb3QpO1xuXHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0fSk7XG5cdFx0fVxuXG5cdFx0aihydWxlKS5maW5kKGouUHJvcGVydHksIHtrZXk6IHtuYW1lOiAndXJsJ319KVxuXHRcdFx0LmZvckVhY2goKHByb3BlcnR5UnVsZSkgPT4ge1xuXHRcdFx0XHRjb25zdCBpc1RoaXNQcm9wc0Rlc3RydWN0dXJlID0gaihwcm9wZXJ0eVJ1bGUpLmNsb3Nlc3Qoai5WYXJpYWJsZURlY2xhcmF0b3IsIHtcblx0XHRcdFx0XHRpbml0OiB7XG5cdFx0XHRcdFx0XHRvYmplY3Q6IHtcblx0XHRcdFx0XHRcdFx0dHlwZTogJ1RoaXNFeHByZXNzaW9uJ1xuXHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdHByb3BlcnR5OiB7bmFtZTogJ3Byb3BzJ31cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0pO1xuXHRcdFx0XHRpZiAoaXNUaGlzUHJvcHNEZXN0cnVjdHVyZS5sZW5ndGggPT09IDApIHtcblx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdH1cblx0XHRcdFx0Y29uc3Qgb3JpZ2luYWxLZXlWYWx1ZSA9IHByb3BlcnR5UnVsZS52YWx1ZS52YWx1ZS5uYW1lO1xuXHRcdFx0XHRwcm9wZXJ0eVJ1bGUudmFsdWUua2V5Lm5hbWUgPSAncm91dGVyJztcblx0XHRcdFx0d3JhcERlZmF1bHRFeHBvcnRJbldpdGhSb3V0ZXIoKTtcblx0XHRcdFx0YWRkV2l0aFJvdXRlckltcG9ydChqLCByb290KTtcblx0XHRcdFx0Ly8gSWYgdGhlIHByb3BlcnR5IGlzIHJlYXNzaWduZWQgdG8gYW5vdGhlciB2YXJpYWJsZSB3ZSBkb24ndCBoYXZlIHRvIHRyYW5zZm9ybSBpdFxuXHRcdFx0XHRpZiAob3JpZ2luYWxLZXlWYWx1ZSAhPT0gJ3VybCcpIHtcblx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRwcm9wZXJ0eVJ1bGUudmFsdWUudmFsdWUubmFtZSA9ICdyb3V0ZXInO1xuXHRcdFx0XHRqKHByb3BlcnR5UnVsZSkuY2xvc2VzdChqLkJsb2NrU3RhdGVtZW50KVxuXHRcdFx0XHRcdC5maW5kKGouSWRlbnRpZmllciwgKGlkZW50aWZpZXJOb2RlKSA9PiB7XG5cdFx0XHRcdFx0XHRpZiAoaWRlbnRpZmllck5vZGUudHlwZSA9PT0gJ0pTWElkZW50aWZpZXInKSB7XG5cdFx0XHRcdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0aWYgKGlkZW50aWZpZXJOb2RlLm5hbWUgIT09ICd1cmwnKSB7XG5cdFx0XHRcdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHRcdFx0fSlcblx0XHRcdFx0XHQucmVwbGFjZVdpdGgoai5pZGVudGlmaWVyKCdyb3V0ZXInKSk7XG5cdFx0XHR9KTtcblxuXHRcdGoocnVsZSkuZmluZChqLk1ldGhvZERlZmluaXRpb24sIHtrZXk6IHtuYW1lOiAnY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wcyd9fSlcblx0XHRcdC5mb3JFYWNoKChtZXRob2RSdWxlKSA9PiB7XG5cdFx0XHRcdGNvbnN0IGZ1bmMgPSBtZXRob2RSdWxlLnZhbHVlLnZhbHVlO1xuXHRcdFx0XHRpZiAoIWZ1bmMucGFyYW1zWzBdKSB7XG5cdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGNvbnN0IGZpcnN0QXJndW1lbnROYW1lID0gZnVuYy5wYXJhbXNbMF0ubmFtZTtcblx0XHRcdFx0Y29uc3QgcHJvcHNVcmxVc2FnZSA9IGdldFByb3BzVXJsTm9kZXMoaiwgaihtZXRob2RSdWxlKSwgZmlyc3RBcmd1bWVudE5hbWUpO1xuXHRcdFx0XHR0dXJuVXJsSW50b1JvdXRlcihqLCBwcm9wc1VybFVzYWdlKTtcblx0XHRcdFx0aWYgKHByb3BzVXJsVXNhZ2UubGVuZ3RoID09PSAwKSB7XG5cdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHR9XG5cdFx0XHRcdHdyYXBEZWZhdWx0RXhwb3J0SW5XaXRoUm91dGVyKCk7XG5cdFx0XHRcdGFkZFdpdGhSb3V0ZXJJbXBvcnQoaiwgcm9vdCk7XG5cdFx0XHR9KTtcblxuXHRcdGoocnVsZSkuZmluZChqLk1ldGhvZERlZmluaXRpb24sIHtrZXk6IHtuYW1lOiAnY29tcG9uZW50RGlkVXBkYXRlJ319KVxuXHRcdFx0LmZvckVhY2goKG1ldGhvZFJ1bGUpID0+IHtcblx0XHRcdFx0Y29uc3QgZnVuYyA9IG1ldGhvZFJ1bGUudmFsdWUudmFsdWU7XG5cdFx0XHRcdGlmICghZnVuYy5wYXJhbXNbMF0pIHtcblx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdH1cblx0XHRcdFx0Y29uc3QgZmlyc3RBcmd1bWVudE5hbWUgPSBmdW5jLnBhcmFtc1swXS5uYW1lO1xuXHRcdFx0XHRjb25zdCBwcm9wc1VybFVzYWdlID0gZ2V0UHJvcHNVcmxOb2RlcyhqLCBqKG1ldGhvZFJ1bGUpLCBmaXJzdEFyZ3VtZW50TmFtZSk7XG5cdFx0XHRcdHR1cm5VcmxJbnRvUm91dGVyKGosIHByb3BzVXJsVXNhZ2UpO1xuXHRcdFx0XHRpZiAocHJvcHNVcmxVc2FnZS5sZW5ndGggPT09IDApIHtcblx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdH1cblx0XHRcdFx0d3JhcERlZmF1bHRFeHBvcnRJbldpdGhSb3V0ZXIoKTtcblx0XHRcdFx0YWRkV2l0aFJvdXRlckltcG9ydChqLCByb290KTtcblx0XHRcdH0pO1xuXG5cdFx0Y29uc3QgdGhpc1Byb3BzVXJsVXNhZ2UgPSBnZXRUaGlzUHJvcHNVcmxOb2RlcyhqLCBqKHJ1bGUpKTtcblx0XHRjb25zdCBwcm9wc1VybFVzYWdlID0gZ2V0UHJvcHNVcmxOb2RlcyhqLCBqKHJ1bGUpLCAncHJvcHMnKTtcblxuXHRcdC8vIHJlbmFtZSBgdXJsYCB0byBgcm91dGVyYFxuXHRcdHR1cm5VcmxJbnRvUm91dGVyKGosIHRoaXNQcm9wc1VybFVzYWdlKTtcblx0XHR0dXJuVXJsSW50b1JvdXRlcihqLCBwcm9wc1VybFVzYWdlKTtcblxuXHRcdGlmICh0aGlzUHJvcHNVcmxVc2FnZS5sZW5ndGggPT09IDAgJiYgcHJvcHNVcmxVc2FnZS5sZW5ndGggPT09IDApIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHR3cmFwRGVmYXVsdEV4cG9ydEluV2l0aFJvdXRlcigpO1xuXHRcdGFkZFdpdGhSb3V0ZXJJbXBvcnQoaiwgcm9vdCk7XG5cdFx0cmV0dXJuO1xuXHR9KTtcblxuXHRyZXR1cm4gcm9vdC50b1NvdXJjZSgpO1xufVxuIl19",
    "map": {
      "version": 3,
      "sources": [
        "url-to-withrouter.js"
      ],
      "names": [
        "addWithRouterImport",
        "j",
        "root",
        "withRouterSpecifier",
        "importSpecifier",
        "identifier",
        "originalRouterImport",
        "find",
        "ImportDeclaration",
        "source",
        "value",
        "length",
        "ImportSpecifier",
        "imported",
        "name",
        "forEach",
        "node",
        "specifiers",
        "push",
        "withRouterImport",
        "importDeclaration",
        "stringLiteral",
        "Program",
        "body",
        "unshift",
        "getThisPropsUrlNodes",
        "tree",
        "MemberExpression",
        "object",
        "type",
        "property",
        "getPropsUrlNodes",
        "wrapNodeInFunction",
        "functionName",
        "args",
        "mappedArgs",
        "map",
        "callExpression",
        "turnUrlIntoRouter",
        "Identifier",
        "replaceWith",
        "transformer",
        "file",
        "api",
        "jscodeshift",
        "defaultExports",
        "ExportDefaultDeclaration",
        "rule",
        "declaration",
        "wrapDefaultExportInWithRouter",
        "CallExpression",
        "callee",
        "exportDefaultDeclaration",
        "implementation",
        "Declaration",
        "id",
        "VariableDeclarator",
        "Property",
        "key",
        "propertyRule",
        "isThisPropsDestructure",
        "closest",
        "init",
        "originalKeyValue",
        "BlockStatement",
        "identifierNode",
        "thisPropsUrlUsage",
        "arrowFunctions",
        "ArrowFunctionExpression",
        "r",
        "Expression",
        "params",
        "propsUrlUsage",
        "haystack",
        "firstArgument",
        "arguments",
        "callRule",
        "MethodDefinition",
        "methodRule",
        "func",
        "firstArgumentName",
        "toSource"
      ],
      "mappings": "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",
      "sourceRoot": "/Users/kung/Projects/trainings/the-arts",
      "sourcesContent": [
        "function addWithRouterImport(j, root) {\n\t// We create an import specifier, this is the value of an import, eg:\n\t// import {withRouter} from 'next/router\n\t// The specifier would be `withRouter`\n\tconst withRouterSpecifier = j.importSpecifier(j.identifier('withRouter'));\n\n\t// Check if this file is already import `next/router`\n\t// so that we can just attach `withRouter` instead of creating a new `import` node\n\tconst originalRouterImport = root.find(j.ImportDeclaration, {\n\t\tsource: {\n\t\t\tvalue: 'next/router'\n\t\t}\n\t});\n\tif (originalRouterImport.length > 0) {\n\t\t// Check if `withRouter` is already imported. In that case we don't have to do anything\n\t\tif (originalRouterImport.find(j.ImportSpecifier, {imported: {name: 'withRouter'}}).length > 0) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Attach `withRouter` to the existing `next/router` import node\n\t\toriginalRouterImport.forEach((node) => {\n\t\t\tnode.value.specifiers.push(withRouterSpecifier);\n\t\t});\n\t\treturn;\n\t}\n\n\t// Create import node\n\t// import {withRouter} from 'next/router'\n\tconst withRouterImport = j.importDeclaration([\n\t\twithRouterSpecifier\n\t], j.stringLiteral('next/router'));\n\n\t// Find the Program, this is the top level AST node\n\tconst Program = root.find(j.Program);\n\t// Attach the import at the top of the body\n\tProgram.forEach((node) => {\n\t\tnode.value.body.unshift(withRouterImport);\n\t});\n}\n\nfunction getThisPropsUrlNodes(j, tree) {\n\treturn tree.find(j.MemberExpression, {\n\t\tobject: {\n\t\t\ttype: 'MemberExpression',\n\t\t\tobject: {type: 'ThisExpression'},\n\t\t\tproperty: {name: 'props'}\n\t\t},\n\t\tproperty: {name: 'url'}\n\t});\n}\n\nfunction getPropsUrlNodes(j, tree, name) {\n\treturn tree.find(j.MemberExpression, {\n\t\tobject: {name},\n\t\tproperty: {name: 'url'}\n\t});\n}\n\n// Wraps the provided node in a function call\n// For example if `functionName` is `withRouter` it will wrap the provided node in `withRouter(NODE_CONTENT)`\nfunction wrapNodeInFunction(j, functionName, args) {\n\tconst mappedArgs = args.map((node) => {\n\t\t// If the node is a ClassDeclaration we have to turn it into a ClassExpression\n\t\t// since ClassDeclarations can't be wrapped in a function\n\t\tif (node.type === 'ClassDeclaration') {\n\t\t\tnode.type = 'ClassExpression';\n\t\t}\n\n\t\treturn node;\n\t});\n\treturn j.callExpression(j.identifier(functionName), mappedArgs);\n}\n\nfunction turnUrlIntoRouter(j, tree) {\n\ttree.find(j.Identifier, {name: 'url'}).replaceWith(j.identifier('router'));\n}\n\nexport default function transformer(file, api) {\n\t// j is just a shorthand for the jscodeshift api\n\tconst j = api.jscodeshift;\n\t// this is the AST root on which we can call methods like `.find`\n\tconst root = j(file.source);\n\n\t// We search for `export default`\n\tconst defaultExports = root.find(j.ExportDefaultDeclaration);\n\n\t// We loop over the `export default` instances\n\t// This is just how jscodeshift works, there can only be one export default instance\n\tdefaultExports.forEach((rule) => {\n\t\t// rule.value is an AST node\n\t\tconst {value: node} = rule;\n\t\t// declaration holds the AST node for what comes after `export default`\n\t\tconst {declaration} = node;\n\n\t\tfunction wrapDefaultExportInWithRouter() {\n\t\t\tif (j(rule).find(j.CallExpression, {callee: {name: 'withRouter'}}).length > 0) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tj(rule).replaceWith(j.exportDefaultDeclaration(wrapNodeInFunction(j, 'withRouter', [declaration])));\n\t\t}\n\n\t\t// The `Identifier` type is given in this case:\n\t\t// export default Test\n\t\t// where `Test` is the identifier\n\t\tif (declaration.type === 'Identifier') {\n\t\t\t// the variable name\n\t\t\tconst {name} = declaration;\n\n\t\t\t// find the implementation of the variable, can be a class, function, etc\n\t\t\tlet implementation = root.find(j.Declaration, {id: {name}});\n\t\t\tif (implementation.length === 0) {\n\t\t\t\timplementation = root.find(j.VariableDeclarator, {id: {name}});\n\t\t\t}\n\n\t\t\timplementation.find(j.Property, {key: {name: 'url'}}).forEach((propertyRule) => {\n\t\t\t\tconst isThisPropsDestructure = j(propertyRule).closest(j.VariableDeclarator, {\n\t\t\t\t\tinit: {\n\t\t\t\t\t\tobject: {\n\t\t\t\t\t\t\ttype: 'ThisExpression'\n\t\t\t\t\t\t},\n\t\t\t\t\t\tproperty: {name: 'props'}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tif (isThisPropsDestructure.length === 0) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tconst originalKeyValue = propertyRule.value.value.name;\n\t\t\t\tpropertyRule.value.key.name = 'router';\n\t\t\t\twrapDefaultExportInWithRouter();\n\t\t\t\taddWithRouterImport(j, root);\n\t\t\t\t// If the property is reassigned to another variable we don't have to transform it\n\t\t\t\tif (originalKeyValue !== 'url') {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tpropertyRule.value.value.name = 'router';\n\t\t\t\tj(propertyRule).closest(j.BlockStatement)\n\t\t\t\t\t.find(j.Identifier, (identifierNode) => {\n\t\t\t\t\t\tif (identifierNode.type === 'JSXIdentifier') {\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (identifierNode.name !== 'url') {\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t})\n\t\t\t\t\t.replaceWith(j.identifier('router'));\n\t\t\t});\n\n\t\t\t// Find usage of `this.props.url`\n\t\t\tconst thisPropsUrlUsage = getThisPropsUrlNodes(j, implementation);\n\n\t\t\tif (thisPropsUrlUsage.length === 0) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// rename `url` to `router`\n\t\t\tturnUrlIntoRouter(j, thisPropsUrlUsage);\n\t\t\twrapDefaultExportInWithRouter();\n\t\t\taddWithRouterImport(j, root);\n\t\t\treturn;\n\t\t}\n\n\t\tconst arrowFunctions = j(rule).find(j.ArrowFunctionExpression);\n\t\t(() => {\n\t\t\tif (arrowFunctions.length === 0) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tarrowFunctions.forEach((r) => {\n\t\t\t\t// This makes sure we don't match nested functions, only the top one\n\t\t\t\tif (j(r).closest(j.Expression).length !== 0) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (!r.value.params || !r.value.params[0]) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tconst name = r.value.params[0].name;\n\t\t\t\tconst propsUrlUsage = getPropsUrlNodes(j, j(r), name);\n\t\t\t\tif (propsUrlUsage.length === 0) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tturnUrlIntoRouter(j, propsUrlUsage);\n\t\t\t\twrapDefaultExportInWithRouter();\n\t\t\t\taddWithRouterImport(j, root);\n\t\t\t});\n\t\t\treturn;\n\t\t})();\n\n\t\tif (declaration.type === 'CallExpression') {\n\t\t\tj(rule).find(j.CallExpression, (haystack) => {\n\t\t\t\tconst firstArgument = haystack.arguments[0] || {};\n\t\t\t\tif (firstArgument.type === 'Identifier') {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\n\t\t\t\treturn false;\n\t\t\t})\n\t\t\t\t.forEach((callRule) => {\n\t\t\t\t\tconst {name} = callRule.value.arguments[0];\n\n\t\t\t\t\t// find the implementation of the variable, can be a class, function, etc\n\t\t\t\t\tlet implementation = root.find(j.Declaration, {id: {name}});\n\t\t\t\t\tif (implementation.length === 0) {\n\t\t\t\t\t\timplementation = root.find(j.VariableDeclarator, {id: {name}});\n\t\t\t\t\t}\n\t\t\t\t\t// Find usage of `this.props.url`\n\t\t\t\t\tconst thisPropsUrlUsage = getThisPropsUrlNodes(j, implementation);\n\n\t\t\t\t\timplementation.find(j.Property, {key: {name: 'url'}}).forEach((propertyRule) => {\n\t\t\t\t\t\tconst isThisPropsDestructure = j(propertyRule).closest(j.VariableDeclarator, {\n\t\t\t\t\t\t\tinit: {\n\t\t\t\t\t\t\t\tobject: {\n\t\t\t\t\t\t\t\t\ttype: 'ThisExpression'\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tproperty: {name: 'props'}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t\tif (isThisPropsDestructure.length === 0) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tconst originalKeyValue = propertyRule.value.value.name;\n\t\t\t\t\t\tpropertyRule.value.key.name = 'router';\n\t\t\t\t\t\twrapDefaultExportInWithRouter();\n\t\t\t\t\t\taddWithRouterImport(j, root);\n\t\t\t\t\t\t// If the property is reassigned to another variable we don't have to transform it\n\t\t\t\t\t\tif (originalKeyValue !== 'url') {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tpropertyRule.value.value.name = 'router';\n\t\t\t\t\t\tj(propertyRule).closest(j.BlockStatement)\n\t\t\t\t\t\t\t.find(j.Identifier, (identifierNode) => {\n\t\t\t\t\t\t\t\tif (identifierNode.type === 'JSXIdentifier') {\n\t\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tif (identifierNode.name !== 'url') {\n\t\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t.replaceWith(j.identifier('router'));\n\t\t\t\t\t});\n\n\t\t\t\t\tif (thisPropsUrlUsage.length === 0) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\t// rename `url` to `router`\n\t\t\t\t\tturnUrlIntoRouter(j, thisPropsUrlUsage);\n\t\t\t\t\twrapDefaultExportInWithRouter();\n\t\t\t\t\taddWithRouterImport(j, root);\n\t\t\t\t\treturn;\n\t\t\t\t});\n\t\t}\n\n\t\tj(rule).find(j.Property, {key: {name: 'url'}})\n\t\t\t.forEach((propertyRule) => {\n\t\t\t\tconst isThisPropsDestructure = j(propertyRule).closest(j.VariableDeclarator, {\n\t\t\t\t\tinit: {\n\t\t\t\t\t\tobject: {\n\t\t\t\t\t\t\ttype: 'ThisExpression'\n\t\t\t\t\t\t},\n\t\t\t\t\t\tproperty: {name: 'props'}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tif (isThisPropsDestructure.length === 0) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tconst originalKeyValue = propertyRule.value.value.name;\n\t\t\t\tpropertyRule.value.key.name = 'router';\n\t\t\t\twrapDefaultExportInWithRouter();\n\t\t\t\taddWithRouterImport(j, root);\n\t\t\t\t// If the property is reassigned to another variable we don't have to transform it\n\t\t\t\tif (originalKeyValue !== 'url') {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tpropertyRule.value.value.name = 'router';\n\t\t\t\tj(propertyRule).closest(j.BlockStatement)\n\t\t\t\t\t.find(j.Identifier, (identifierNode) => {\n\t\t\t\t\t\tif (identifierNode.type === 'JSXIdentifier') {\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (identifierNode.name !== 'url') {\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t})\n\t\t\t\t\t.replaceWith(j.identifier('router'));\n\t\t\t});\n\n\t\tj(rule).find(j.MethodDefinition, {key: {name: 'componentWillReceiveProps'}})\n\t\t\t.forEach((methodRule) => {\n\t\t\t\tconst func = methodRule.value.value;\n\t\t\t\tif (!func.params[0]) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tconst firstArgumentName = func.params[0].name;\n\t\t\t\tconst propsUrlUsage = getPropsUrlNodes(j, j(methodRule), firstArgumentName);\n\t\t\t\tturnUrlIntoRouter(j, propsUrlUsage);\n\t\t\t\tif (propsUrlUsage.length === 0) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\twrapDefaultExportInWithRouter();\n\t\t\t\taddWithRouterImport(j, root);\n\t\t\t});\n\n\t\tj(rule).find(j.MethodDefinition, {key: {name: 'componentDidUpdate'}})\n\t\t\t.forEach((methodRule) => {\n\t\t\t\tconst func = methodRule.value.value;\n\t\t\t\tif (!func.params[0]) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tconst firstArgumentName = func.params[0].name;\n\t\t\t\tconst propsUrlUsage = getPropsUrlNodes(j, j(methodRule), firstArgumentName);\n\t\t\t\tturnUrlIntoRouter(j, propsUrlUsage);\n\t\t\t\tif (propsUrlUsage.length === 0) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\twrapDefaultExportInWithRouter();\n\t\t\t\taddWithRouterImport(j, root);\n\t\t\t});\n\n\t\tconst thisPropsUrlUsage = getThisPropsUrlNodes(j, j(rule));\n\t\tconst propsUrlUsage = getPropsUrlNodes(j, j(rule), 'props');\n\n\t\t// rename `url` to `router`\n\t\tturnUrlIntoRouter(j, thisPropsUrlUsage);\n\t\tturnUrlIntoRouter(j, propsUrlUsage);\n\n\t\tif (thisPropsUrlUsage.length === 0 && propsUrlUsage.length === 0) {\n\t\t\treturn;\n\t\t}\n\n\t\twrapDefaultExportInWithRouter();\n\t\taddWithRouterImport(j, root);\n\t\treturn;\n\t});\n\n\treturn root.toSource();\n}\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1529679498000
  }
}